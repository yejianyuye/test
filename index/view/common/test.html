/* Zepto v1.1.6 - zepto event ajax form ie - zeptojs.com/license */
var Zepto = function () {
    function L(t) {
        return null == t ? String(t) : j[S.call(t)] || "object"
    }
    function Z(t) {
        return "function" == L(t)
    }
    function _(t) {
        return null != t && t == t.window
    }
    function $(t) {
        return null != t && t.nodeType == t.DOCUMENT_NODE
    }
    function D(t) {
        return "object" == L(t)
    }
    function M(t) {
        return D(t) && !_(t) && Object.getPrototypeOf(t) == Object.prototype
    }
    function R(t) {
        return "number" == typeof t.length
    }
    function k(t) {
        return s.call(t, function (t) {
            return null != t
        })
    }
    function z(t) {
        return t.length > 0 ? n.fn.concat.apply([], t) : t
    }
    function F(t) {
        return t.replace(/::/g, "/").replace(/([A-Z]+)([A-Z][a-z])/g, "$1_$2").replace(/([a-z\d])([A-Z])/g, "$1_$2").replace(/_/g, "-").toLowerCase()
    }
    function q(t) {
        return t in f ? f[t] : f[t] = new RegExp("(^|\\s)" + t + "(\\s|$)")
    }
    function H(t, e) {
        return "number" != typeof e || c[F(t)] ? e : e + "px"
    }
    function I(t) {
        var e, n;
        return u[t] || (e = a.createElement(t), a.body.appendChild(e), n = getComputedStyle(e, "").getPropertyValue("display"), e.parentNode.removeChild(e), "none" == n && (n = "block"), u[t] = n),
        u[t]
    }
    function V(t) {
        return "children" in t ? o.call(t.children) : n.map(t.childNodes, function (t) {
            return 1 == t.nodeType ? t : void 0
        })
    }
    function B(n, i, r) {
        for (e in i) r && (M(i[e]) || A(i[e])) ? (M(i[e]) && !M(n[e]) && (n[e] = {}), A(i[e]) && !A(n[e]) && (n[e] = []), B(n[e], i[e], r)) : i[e] !== t && (n[e] = i[e])
    }
    function U(t, e) {
        return null == e ? n(t) : n(t).filter(e)
    }
    function J(t, e, n, i) {
        return Z(e) ? e.call(t, n, i) : e
    }
    function X(t, e, n) {
        null == n ? t.removeAttribute(e) : t.setAttribute(e, n)
    }
    function W(e, n) {
        var i = e.className || "",
            r = i && i.baseVal !== t;
        return n === t ? r ? i.baseVal : i : void(r ? i.baseVal = n : e.className = n)
    }
    function Y(t) {
        try {
            return t ? "true" == t || ("false" == t ? !1 : "null" == t ? null : +t + "" == t ? +t : /^[\[\{]/.test(t) ? n.parseJSON(t) : t) : t
        } catch (e) {
            return t
        }
    }
    function G(t, e) {
        e(t);
        for (var n = 0, i = t.childNodes.length; i > n; n++) G(t.childNodes[n], e)
    }
    var t, e, n, i, C, N, r = [],
        o = r.slice,
        s = r.filter,
        a = window.document,
        u = {},
        f = {},
        c = {
            "column-count": 1,
            columns: 1,
            "font-weight": 1,
            "line-height": 1,
            opacity: 1,
            "z-index": 1,
            zoom: 1
        },
        l = /^\s*<(\w+|!)[^>]*>/,
        h = /^<(\w+)\s*\/?>(?:<\/\1>|)$/,
        p = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,
        d = /^(?:body|html)$/i,
        m = /([A-Z])/g,
        g = ["val", "css", "html", "text", "data", "width", "height", "offset"],
        v = ["after", "prepend", "before", "append"],
        y = a.createElement("table"),
        x = a.createElement("tr"),
        b = {
            tr: a.createElement("tbody"),
            tbody: y,
            thead: y,
            tfoot: y,
            td: x,
            th: x,
            "*": a.createElement("div")
        },
        w = /complete|loaded|interactive/,
        E = /^[\w-]*$/,
        j = {},
        S = j.toString,
        T = {},
        O = a.createElement("div"),
        P = {
            tabindex: "tabIndex",
            readonly: "readOnly",
            "for": "htmlFor",
            "class": "className",
            maxlength: "maxLength",
            cellspacing: "cellSpacing",
            cellpadding: "cellPadding",
            rowspan: "rowSpan",
            colspan: "colSpan",
            usemap: "useMap",
            frameborder: "frameBorder",
            contenteditable: "contentEditable"
        },
        A = Array.isArray ||
    function (t) {
            return t instanceof Array
        };
    return T.matches = function (t, e) {
            if (!e || !t || 1 !== t.nodeType) return !1;
            var n = t.webkitMatchesSelector || t.mozMatchesSelector || t.oMatchesSelector || t.matchesSelector;
            if (n) return n.call(t, e);
            var i, r = t.parentNode,
                o = !r;
            return o && (r = O).appendChild(t),
            i = ~T.qsa(r, e).indexOf(t),
            o && O.removeChild(t),
            i
        },
    C = function (t) {
            return t.replace(/-+(.)?/g, function (t, e) {
                return e ? e.toUpperCase() : ""
            })
        },
    N = function (t) {
            return s.call(t, function (e, n) {
                return t.indexOf(e) == n
            })
        },
    T.fragment = function (e, i, r) {
            var s, u, f;
            return h.test(e) && (s = n(a.createElement(RegExp.$1))),
            s || (e.replace && (e = e.replace(p, "<$1></$2>")), i === t && (i = l.test(e) && RegExp.$1), i in b || (i = "*"), f = b[i], f.innerHTML = "" + e, s = n.each(o.call(f.childNodes), function () {
                f.removeChild(this)
            })),
            M(r) && (u = n(s), n.each(r, function (t, e) {
                g.indexOf(t) > -1 ? u[t](e) : u.attr(t, e)
            })),
            s
        },
    T.Z = function (t, e) {
            return t = t || [],
            t.__proto__ = n.fn,
            t.selector = e || "",
            t
        },
    T.isZ = function (t) {
            return t instanceof T.Z
        },
    T.init = function (e, i) {
            var r;
            if (!e) return T.Z();
            if ("string" == typeof e) if (e = e.trim(), "<" == e[0] && l.test(e)) r = T.fragment(e, RegExp.$1, i),
            e = null;
            else {
                if (i !== t) return n(i).find(e);
                r = T.qsa(a, e)
            } else {
                if (Z(e)) return n(a).ready(e);
                if (T.isZ(e)) return e;
                if (A(e)) r = k(e);
                else if (D(e)) r = [e],
                e = null;
                else if (l.test(e)) r = T.fragment(e.trim(), RegExp.$1, i),
                e = null;
                else {
                    if (i !== t) return n(i).find(e);
                    r = T.qsa(a, e)
                }
            }
            return T.Z(r, e)
        },
    n = function (t, e) {
            return T.init(t, e)
        },
    n.extend = function (t) {
            var e, n = o.call(arguments, 1);
            return "boolean" == typeof t && (e = t, t = n.shift()),
            n.forEach(function (n) {
                B(t, n, e)
            }),
            t
        },
    T.qsa = function (t, e) {
            var n, i = "#" == e[0],
                r = !i && "." == e[0],
                s = i || r ? e.slice(1) : e,
                a = E.test(s);
            return $(t) && a && i ? (n = t.getElementById(s)) ? [n] : [] : 1 !== t.nodeType && 9 !== t.nodeType ? [] : o.call(a && !i ? r ? t.getElementsByClassName(s) : t.getElementsByTagName(e) : t.querySelectorAll(e))
        },
    n.contains = a.documentElement.contains ?
    function (t, e) {
            return t !== e && t.contains(e)
        } : function (t, e) {
            for (; e && (e = e.parentNode);) if (e === t) return !0;
            return !1
        },
    n.type = L,
    n.isFunction = Z,
    n.isWindow = _,
    n.isArray = A,
    n.isPlainObject = M,
    n.isEmptyObject = function (t) {
            var e;
            for (e in t) return !1;
            return !0
        },
    n.inArray = function (t, e, n) {
            return r.indexOf.call(e, t, n)
        },
    n.camelCase = C,
    n.trim = function (t) {
            return null == t ? "" : String.prototype.trim.call(t)
        },
    n.uuid = 0,
    n.support = {},
    n.expr = {},
    n.map = function (t, e) {
            var n, r, o, i = [];
            if (R(t)) for (r = 0; r < t.length; r++) n = e(t[r], r),
            null != n && i.push(n);
            else for (o in t) n = e(t[o], o),
            null != n && i.push(n);
            return z(i)
        },
    n.each = function (t, e) {
            var n, i;
            if (R(t)) {
                for (n = 0; n < t.length; n++) if (e.call(t[n], n, t[n]) === !1) return t
            } else for (i in t) if (e.call(t[i], i, t[i]) === !1) return t;
            return t
        },
    n.grep = function (t, e) {
            return s.call(t, e)
        },
    window.JSON && (n.parseJSON = JSON.parse),
    n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "), function (t, e) {
            j["[object " + e + "]"] = e.toLowerCase()
        }),
    n.fn = {
            forEach: r.forEach,
            reduce: r.reduce,
            push: r.push,
            sort: r.sort,
            indexOf: r.indexOf,
            concat: r.concat,
            map: function (t) {
                return n(n.map(this, function (e, n) {
                    return t.call(e, n, e)
                }))
            },
            slice: function () {
                return n(o.apply(this, arguments))
            },
            ready: function (t) {
                return w.test(a.readyState) && a.body ? t(n) : a.addEventListener("DOMContentLoaded", function () {
                    t(n)
                }, !1),
                this
            },
            get: function (e) {
                return e === t ? o.call(this) : this[e >= 0 ? e : e + this.length]
            },
            toArray: function () {
                return this.get()
            },
            size: function () {
                return this.length
            },
            remove: function () {
                return this.each(function () {
                    null != this.parentNode && this.parentNode.removeChild(this)
                })
            },
            each: function (t) {
                return r.every.call(this, function (e, n) {
                    return t.call(e, n, e) !== !1
                }),
                this
            },
            filter: function (t) {
                return Z(t) ? this.not(this.not(t)) : n(s.call(this, function (e) {
                    return T.matches(e, t)
                }))
            },
            add: function (t, e) {
                return n(N(this.concat(n(t, e))))
            },
            is: function (t) {
                return this.length > 0 && T.matches(this[0], t)
            },
            not: function (e) {
                var i = [];
                if (Z(e) && e.call !== t) this.each(function (t) {
                    e.call(this, t) || i.push(this)
                });
                else {
                    var r = "string" == typeof e ? this.filter(e) : R(e) && Z(e.item) ? o.call(e) : n(e);
                    this.forEach(function (t) {
                        r.indexOf(t) < 0 && i.push(t)
                    })
                }
                return n(i)
            },
            has: function (t) {
                return this.filter(function () {
                    return D(t) ? n.contains(this, t) : n(this).find(t).size()
                })
            },
            eq: function (t) {
                return -1 === t ? this.slice(t) : this.slice(t, +t + 1)
            },
            first: function () {
                var t = this[0];
                return t && !D(t) ? t : n(t)
            },
            last: function () {
                var t = this[this.length - 1];
                return t && !D(t) ? t : n(t)
            },
            find: function (t) {
                var e, i = this;
                return e = t ? "object" == typeof t ? n(t).filter(function () {
                    var t = this;
                    return r.some.call(i, function (e) {
                        return n.contains(e, t)
                    })
                }) : 1 == this.length ? n(T.qsa(this[0], t)) : this.map(function () {
                    return T.qsa(this, t)
                }) : n()
            },
            closest: function (t, e) {
                var i = this[0],
                    r = !1;
                for ("object" == typeof t && (r = n(t)); i && !(r ? r.indexOf(i) >= 0 : T.matches(i, t));) i = i !== e && !$(i) && i.parentNode;
                return n(i)
            },
            parents: function (t) {
                for (var e = [], i = this; i.length > 0;) i = n.map(i, function (t) {
                    return (t = t.parentNode) && !$(t) && e.indexOf(t) < 0 ? (e.push(t), t) : void 0
                });
                return U(e, t)
            },
            parent: function (t) {
                return U(N(this.pluck("parentNode")), t)
            },
            children: function (t) {
                return U(this.map(function () {
                    return V(this)
                }), t)
            },
            contents: function () {
                return this.map(function () {
                    return o.call(this.childNodes)
                })
            },
            siblings: function (t) {
                return U(this.map(function (t, e) {
                    return s.call(V(e.parentNode), function (t) {
                        return t !== e
                    })
                }), t)
            },
            empty: function () {
                return this.each(function () {
                    this.innerHTML = ""
                })
            },
            pluck: function (t) {
                return n.map(this, function (e) {
                    return e[t]
                })
            },
            show: function () {
                return this.each(function () {
                    "none" == this.style.display && (this.style.display = ""),
                    "none" == getComputedStyle(this, "").getPropertyValue("display") && (this.style.display = I(this.nodeName))
                })
            },
            replaceWith: function (t) {
                return this.before(t).remove()
            },
            wrap: function (t) {
                var e = Z(t);
                if (this[0] && !e) var i = n(t).get(0),
                    r = i.parentNode || this.length > 1;
                return this.each(function (o) {
                        n(this).wrapAll(e ? t.call(this, o) : r ? i.cloneNode(!0) : i)
                    })
            },
            wrapAll: function (t) {
                if (this[0]) {
                    n(this[0]).before(t = n(t));
                    for (var e;
                    (e = t.children()).length;) t = e.first();
                    n(t).append(this)
                }
                return this
            },
            wrapInner: function (t) {
                var e = Z(t);
                return this.each(function (i) {
                    var r = n(this),
                        o = r.contents(),
                        s = e ? t.call(this, i) : t;
                    o.length ? o.wrapAll(s) : r.append(s)
                })
            },
            unwrap: function () {
                return this.parent().each(function () {
                    n(this).replaceWith(n(this).children())
                }),
                this
            },
            clone: function () {
                return this.map(function () {
                    return this.cloneNode(!0)
                })
            },
            hide: function () {
                return this.css("display", "none")
            },
            toggle: function (e) {
                return this.each(function () {
                    var i = n(this);
                    (e === t ? "none" == i.css("display") : e) ? i.show() : i.hide()
                })
            },
            prev: function (t) {
                return n(this.pluck("previousElementSibling")).filter(t || "*")
            },
            next: function (t) {
                return n(this.pluck("nextElementSibling")).filter(t || "*")
            },
            html: function (t) {
                return 0 in arguments ? this.each(function (e) {
                    var i = this.innerHTML;
                    n(this).empty().append(J(this, t, e, i))
                }) : 0 in this ? this[0].innerHTML : null
            },
            text: function (t) {
                return 0 in arguments ? this.each(function (e) {
                    var n = J(this, t, e, this.textContent);
                    this.textContent = null == n ? "" : "" + n
                }) : 0 in this ? this[0].textContent : null
            },
            attr: function (n, i) {
                var r;
                return "string" != typeof n || 1 in arguments ? this.each(function (t) {
                    if (1 === this.nodeType) if (D(n)) for (e in n) X(this, e, n[e]);
                    else X(this, n, J(this, i, t, this.getAttribute(n)))
                }) : this.length && 1 === this[0].nodeType ? !(r = this[0].getAttribute(n)) && n in this[0] ? this[0][n] : r : t
            },
            removeAttr: function (t) {
                return this.each(function () {
                    1 === this.nodeType && t.split(" ").forEach(function (t) {
                        X(this, t)
                    }, this)
                })
            },
            prop: function (t, e) {
                return t = P[t] || t,
                1 in arguments ? this.each(function (n) {
                    this[t] = J(this, e, n, this[t])
                }) : this[0] && this[0][t]
            },
            data: function (e, n) {
                var i = "data-" + e.replace(m, "-$1").toLowerCase(),
                    r = 1 in arguments ? this.attr(i, n) : this.attr(i);
                return null !== r ? Y(r) : t
            },
            val: function (t) {
                return 0 in arguments ? this.each(function (e) {
                    this.value = J(this, t, e, this.value)
                }) : this[0] && (this[0].multiple ? n(this[0]).find("option").filter(function () {
                    return this.selected
                }).pluck("value") : this[0].value)
            },
            offset: function (t) {
                if (t) return this.each(function (e) {
                    var i = n(this),
                        r = J(this, t, e, i.offset()),
                        o = i.offsetParent().offset(),
                        s = {
                            top: r.top - o.top,
                            left: r.left - o.left
                        };
                    "static" == i.css("position") && (s.position = "relative"),
                    i.css(s)
                });
                if (!this.length) return null;
                var e = this[0].getBoundingClientRect();
                return {
                    left: e.left + window.pageXOffset,
                    top: e.top + window.pageYOffset,
                    width: Math.round(e.width),
                    height: Math.round(e.height)
                }
            },
            css: function (t, i) {
                if (arguments.length < 2) {
                    var r, o = this[0];
                    if (!o) return;
                    if (r = getComputedStyle(o, ""), "string" == typeof t) return o.style[C(t)] || r.getPropertyValue(t);
                    if (A(t)) {
                        var s = {};
                        return n.each(t, function (t, e) {
                            s[e] = o.style[C(e)] || r.getPropertyValue(e)
                        }),
                        s
                    }
                }
                var a = "";
                if ("string" == L(t)) i || 0 === i ? a = F(t) + ":" + H(t, i) : this.each(function () {
                    this.style.removeProperty(F(t))
                });
                else for (e in t) t[e] || 0 === t[e] ? a += F(e) + ":" + H(e, t[e]) + ";" : this.each(function () {
                    this.style.removeProperty(F(e))
                });
                return this.each(function () {
                    this.style.cssText += ";" + a
                })
            },
            index: function (t) {
                return t ? this.indexOf(n(t)[0]) : this.parent().children().indexOf(this[0])
            },
            hasClass: function (t) {
                return t ? r.some.call(this, function (t) {
                    return this.test(W(t))
                }, q(t)) : !1
            },
            addClass: function (t) {
                return t ? this.each(function (e) {
                    if ("className" in this) {
                        i = [];
                        var r = W(this),
                            o = J(this, t, e, r);
                        o.split(/\s+/g).forEach(function (t) {
                                n(this).hasClass(t) || i.push(t)
                            }, this),
                        i.length && W(this, r + (r ? " " : "") + i.join(" "))
                    }
                }) : this
            },
            removeClass: function (e) {
                return this.each(function (n) {
                    if ("className" in this) {
                        if (e === t) return W(this, "");
                        i = W(this),
                        J(this, e, n, i).split(/\s+/g).forEach(function (t) {
                            i = i.replace(q(t), " ")
                        }),
                        W(this, i.trim())
                    }
                })
            },
            toggleClass: function (e, i) {
                return e ? this.each(function (r) {
                    var o = n(this),
                        s = J(this, e, r, W(this));
                    s.split(/\s+/g).forEach(function (e) {
                            (i === t ? !o.hasClass(e) : i) ? o.addClass(e) : o.removeClass(e)
                        })
                }) : this
            },
            scrollTop: function (e) {
                if (this.length) {
                    var n = "scrollTop" in this[0];
                    return e === t ? n ? this[0].scrollTop : this[0].pageYOffset : this.each(n ?
                    function () {
                        this.scrollTop = e
                    } : function () {
                        this.scrollTo(this.scrollX, e)
                    })
                }
            },
            scrollLeft: function (e) {
                if (this.length) {
                    var n = "scrollLeft" in this[0];
                    return e === t ? n ? this[0].scrollLeft : this[0].pageXOffset : this.each(n ?
                    function () {
                        this.scrollLeft = e
                    } : function () {
                        this.scrollTo(e, this.scrollY)
                    })
                }
            },
            position: function () {
                if (this.length) {
                    var t = this[0],
                        e = this.offsetParent(),
                        i = this.offset(),
                        r = d.test(e[0].nodeName) ? {
                            top: 0,
                            left: 0
                        } : e.offset();
                    return i.top -= parseFloat(n(t).css("margin-top")) || 0,
                    i.left -= parseFloat(n(t).css("margin-left")) || 0,
                    r.top += parseFloat(n(e[0]).css("border-top-width")) || 0,
                    r.left += parseFloat(n(e[0]).css("border-left-width")) || 0,
                    {
                            top: i.top - r.top,
                            left: i.left - r.left
                        }
                }
            },
            offsetParent: function () {
                return this.map(function () {
                    for (var t = this.offsetParent || a.body; t && !d.test(t.nodeName) && "static" == n(t).css("position");) t = t.offsetParent;
                    return t
                })
            }
        },
    n.fn.detach = n.fn.remove,
    ["width", "height"].forEach(function (e) {
            var i = e.replace(/./, function (t) {
                return t[0].toUpperCase()
            });
            n.fn[e] = function (r) {
                var o, s = this[0];
                return r === t ? _(s) ? s["inner" + i] : $(s) ? s.documentElement["scroll" + i] : (o = this.offset()) && o[e] : this.each(function (t) {
                    s = n(this),
                    s.css(e, J(this, r, t, s[e]()))
                })
            }
        }),
    v.forEach(function (t, e) {
            var i = e % 2;
            n.fn[t] = function () {
                var t, o, r = n.map(arguments, function (e) {
                    return t = L(e),
                    "object" == t || "array" == t || null == e ? e : T.fragment(e)
                }),
                    s = this.length > 1;
                return r.length < 1 ? this : this.each(function (t, u) {
                        o = i ? u : u.parentNode,
                        u = 0 == e ? u.nextSibling : 1 == e ? u.firstChild : 2 == e ? u : null;
                        var f = n.contains(a.documentElement, o);
                        r.forEach(function (t) {
                            if (s) t = t.cloneNode(!0);
                            else if (!o) return n(t).remove();
                            o.insertBefore(t, u),
                            f && G(t, function (t) {
                                null == t.nodeName || "SCRIPT" !== t.nodeName.toUpperCase() || t.type && "text/javascript" !== t.type || t.src || window.eval.call(window, t.innerHTML)
                            })
                        })
                    })
            },
            n.fn[i ? t + "To" : "insert" + (e ? "Before" : "After")] = function (e) {
                return n(e)[t](this),
                this
            }
        }),
    T.Z.prototype = n.fn,
    T.uniq = N,
    T.deserializeValue = Y,
    n.zepto = T,
    n
}();
window.Zepto = Zepto,
void 0 === window.$ && (window.$ = Zepto),


function (t) {
    function l(t) {
        return t._zid || (t._zid = e++)
    }
    function h(t, e, n, i) {
        if (e = p(e), e.ns) var r = d(e.ns);
        return (s[l(t)] || []).filter(function (t) {
            return !(!t || e.e && t.e != e.e || e.ns && !r.test(t.ns) || n && l(t.fn) !== l(n) || i && t.sel != i)
        })
    }
    function p(t) {
        var e = ("" + t).split(".");
        return {
            e: e[0],
            ns: e.slice(1).sort().join(" ")
        }
    }
    function d(t) {
        return new RegExp("(?:^| )" + t.replace(" ", " .* ?") + "(?: |$)")
    }
    function m(t, e) {
        return t.del && !u && t.e in f || !! e
    }
    function g(t) {
        return c[t] || u && f[t] || t
    }
    function v(e, i, r, o, a, u, f) {
        var h = l(e),
            d = s[h] || (s[h] = []);
        i.split(/\s/).forEach(function (i) {
                if ("ready" == i) return t(document).ready(r);
                var s = p(i);
                s.fn = r,
                s.sel = a,
                s.e in c && (r = function (e) {
                    var n = e.relatedTarget;
                    return !n || n !== this && !t.contains(this, n) ? s.fn.apply(this, arguments) : void 0
                }),
                s.del = u;
                var l = u || r;
                s.proxy = function (t) {
                    if (t = j(t), !t.isImmediatePropagationStopped()) {
                        t.data = o;
                        var i = l.apply(e, t._args == n ? [t] : [t].concat(t._args));
                        return i === !1 && (t.preventDefault(), t.stopPropagation()),
                        i
                    }
                },
                s.i = d.length,
                d.push(s),
                "addEventListener" in e && e.addEventListener(g(s.e), s.proxy, m(s, f))
            })
    }
    function y(t, e, n, i, r) {
        var o = l(t);
        (e || "").split(/\s/).forEach(function (e) {
            h(t, e, n, i).forEach(function (e) {
                delete s[o][e.i],
                "removeEventListener" in t && t.removeEventListener(g(e.e), e.proxy, m(e, r))
            })
        })
    }
    function j(e, i) {
        return (i || !e.isDefaultPrevented) && (i || (i = e), t.each(E, function (t, n) {
            var r = i[t];
            e[t] = function () {
                return this[n] = x,
                r && r.apply(i, arguments)
            },
            e[n] = b
        }), (i.defaultPrevented !== n ? i.defaultPrevented : "returnValue" in i ? i.returnValue === !1 : i.getPreventDefault && i.getPreventDefault()) && (e.isDefaultPrevented = x)),
        e
    }
    function S(t) {
        var e, i = {
            originalEvent: t
        };
        for (e in t) w.test(e) || t[e] === n || (i[e] = t[e]);
        return j(i, t)
    }
    var n, e = 1,
        i = Array.prototype.slice,
        r = t.isFunction,
        o = function (t) {
            return "string" == typeof t
        },
        s = {},
        a = {},
        u = "onfocusin" in window,
        f = {
            focus: "focusin",
            blur: "focusout"
        },
        c = {
            mouseenter: "mouseover",
            mouseleave: "mouseout"
        };
    a.click = a.mousedown = a.mouseup = a.mousemove = "MouseEvents",
    t.event = {
            add: v,
            remove: y
        },
    t.proxy = function (e, n) {
            var s = 2 in arguments && i.call(arguments, 2);
            if (r(e)) {
                var a = function () {
                    return e.apply(n, s ? s.concat(i.call(arguments)) : arguments)
                };
                return a._zid = l(e),
                a
            }
            if (o(n)) return s ? (s.unshift(e[n], e), t.proxy.apply(null, s)) : t.proxy(e[n], e);
            throw new TypeError("expected function")
        },
    t.fn.bind = function (t, e, n) {
            return this.on(t, e, n)
        },
    t.fn.unbind = function (t, e) {
            return this.off(t, e)
        },
    t.fn.one = function (t, e, n, i) {
            return this.on(t, e, n, i, 1)
        };
    var x = function () {
            return !0
        },
        b = function () {
            return !1
        },
        w = /^([A-Z]|returnValue$|layer[XY]$)/,
        E = {
            preventDefault: "isDefaultPrevented",
            stopImmediatePropagation: "isImmediatePropagationStopped",
            stopPropagation: "isPropagationStopped"
        };
    t.fn.delegate = function (t, e, n) {
            return this.on(e, t, n)
        },
    t.fn.undelegate = function (t, e, n) {
            return this.off(e, t, n)
        },
    t.fn.live = function (e, n) {
            return t(document.body).delegate(this.selector, e, n),
            this
        },
    t.fn.die = function (e, n) {
            return t(document.body).undelegate(this.selector, e, n),
            this
        },
    t.fn.on = function (e, s, a, u, f) {
            var c, l, h = this;
            return e && !o(e) ? (t.each(e, function (t, e) {
                h.on(t, s, a, e, f)
            }), h) : (o(s) || r(u) || u === !1 || (u = a, a = s, s = n), (r(a) || a === !1) && (u = a, a = n), u === !1 && (u = b), h.each(function (n, r) {
                f && (c = function (t) {
                    return y(r, t.type, u),
                    u.apply(this, arguments)
                }),
                s && (l = function (e) {
                    var n, o = t(e.target).closest(s, r).get(0);
                    return o && o !== r ? (n = t.extend(S(e), {
                        currentTarget: o,
                        liveFired: r
                    }), (c || u).apply(o, [n].concat(i.call(arguments, 1)))) : void 0
                }),
                v(r, e, u, a, s, l || c)
            }))
        },
    t.fn.off = function (e, i, s) {
            var a = this;
            return e && !o(e) ? (t.each(e, function (t, e) {
                a.off(t, i, e)
            }), a) : (o(i) || r(s) || s === !1 || (s = i, i = n), s === !1 && (s = b), a.each(function () {
                y(this, e, s, i)
            }))
        },
    t.fn.trigger = function (e, n) {
            return e = o(e) || t.isPlainObject(e) ? t.Event(e) : j(e),
            e._args = n,
            this.each(function () {
                e.type in f && "function" == typeof this[e.type] ? this[e.type]() : "dispatchEvent" in this ? this.dispatchEvent(e) : t(this).triggerHandler(e, n)
            })
        },
    t.fn.triggerHandler = function (e, n) {
            var i, r;
            return this.each(function (s, a) {
                i = S(o(e) ? t.Event(e) : e),
                i._args = n,
                i.target = a,
                t.each(h(a, e.type || e), function (t, e) {
                    return r = e.proxy(i),
                    i.isImmediatePropagationStopped() ? !1 : void 0
                })
            }),
            r
        },
    "focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function (e) {
            t.fn[e] = function (t) {
                return 0 in arguments ? this.bind(e, t) : this.trigger(e)
            }
        }),
    t.Event = function (t, e) {
            o(t) || (e = t, t = e.type);
            var n = document.createEvent(a[t] || "Events"),
                i = !0;
            if (e) for (var r in e)"bubbles" == r ? i = !! e[r] : n[r] = e[r];
            return n.initEvent(t, i, !0),
            j(n)
        }
}(Zepto),


function (t) {
    function h(e, n, i) {
        var r = t.Event(n);
        return t(e).trigger(r, i),
        !r.isDefaultPrevented()
    }
    function p(t, e, i, r) {
        return t.global ? h(e || n, i, r) : void 0
    }
    function d(e) {
        e.global && 0 === t.active++ && p(e, null, "ajaxStart")
    }
    function m(e) {
        e.global && !--t.active && p(e, null, "ajaxStop")
    }
    function g(t, e) {
        var n = e.context;
        return e.beforeSend.call(n, t, e) === !1 || p(e, n, "ajaxBeforeSend", [t, e]) === !1 ? !1 : void p(e, n, "ajaxSend", [t, e])
    }
    function v(t, e, n, i) {
        var r = n.context,
            o = "success";
        n.success.call(r, t, o, e),
        i && i.resolveWith(r, [t, o, e]),
        p(n, r, "ajaxSuccess", [e, n, t]),
        x(o, e, n)
    }
    function y(t, e, n, i, r) {
        var o = i.context;
        i.error.call(o, n, e, t),
        r && r.rejectWith(o, [n, e, t]),
        p(i, o, "ajaxError", [n, i, t || e]),
        x(e, n, i)
    }
    function x(t, e, n) {
        var i = n.context;
        n.complete.call(i, e, t),
        p(n, i, "ajaxComplete", [e, n]),
        m(n)
    }
    function b() {}
    function w(t) {
        return t && (t = t.split(";", 2)[0]),
        t && (t == f ? "html" : t == u ? "json" : s.test(t) ? "script" : a.test(t) && "xml") || "text"
    }
    function E(t, e) {
        return "" == e ? t : (t + "&" + e).replace(/[&?]{1,2}/, "?")
    }
    function j(e) {
        e.processData && e.data && "string" != t.type(e.data) && (e.data = t.param(e.data, e.traditional)),
        !e.data || e.type && "GET" != e.type.toUpperCase() || (e.url = E(e.url, e.data), e.data = void 0)
    }
    function S(e, n, i, r) {
        return t.isFunction(n) && (r = i, i = n, n = void 0),
        t.isFunction(i) || (r = i, i = void 0),
        {
            url: e,
            data: n,
            success: i,
            dataType: r
        }
    }
    function C(e, n, i, r) {
        var o, s = t.isArray(n),
            a = t.isPlainObject(n);
        t.each(n, function (n, u) {
                o = t.type(u),
                r && (n = i ? r : r + "[" + (a || "object" == o || "array" == o ? n : "") + "]"),
                !r && s ? e.add(u.name, u.value) : "array" == o || !i && "object" == o ? C(e, u, i, n) : e.add(n, u)
            })
    }
    var i, r, e = 0,
        n = window.document,
        o = /<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,
        s = /^(?:text|application)\/javascript/i,
        a = /^(?:text|application)\/xml/i,
        u = "application/json",
        f = "text/html",
        c = /^\s*$/,
        l = n.createElement("a");
    l.href = window.location.href,
    t.active = 0,
    t.ajaxJSONP = function (i, r) {
            if (!("type" in i)) return t.ajax(i);
            var f, h, o = i.jsonpCallback,
                s = (t.isFunction(o) ? o() : o) || "jsonp" + ++e,
                a = n.createElement("script"),
                u = window[s],
                c = function (e) {
                    t(a).triggerHandler("error", e || "abort")
                },
                l = {
                    abort: c
                };
            return r && r.promise(l),
            t(a).on("load error", function (e, n) {
                    clearTimeout(h),
                    t(a).off().remove(),
                    "error" != e.type && f ? v(f[0], l, i, r) : y(null, n || "error", l, i, r),
                    window[s] = u,
                    f && t.isFunction(u) && u(f[0]),
                    u = f = void 0
                }),
            g(l, i) === !1 ? (c("abort"), l) : (window[s] = function () {
                    f = arguments
                }, a.src = i.url.replace(/\?(.+)=\?/, "?$1=" + s), n.head.appendChild(a), i.timeout > 0 && (h = setTimeout(function () {
                    c("timeout")
                }, i.timeout)), l)
        },
    t.ajaxSettings = {
            type: "GET",
            beforeSend: b,
            success: b,
            error: b,
            complete: b,
            context: null,
            global: !0,
            xhr: function () {
                return new window.XMLHttpRequest
            },
            accepts: {
                script: "text/javascript, application/javascript, application/x-javascript",
                json: u,
                xml: "application/xml, text/xml",
                html: f,
                text: "text/plain"
            },
            crossDomain: !1,
            timeout: 0,
            processData: !0,
            cache: !0
        },
    t.ajax = function (e) {
            var a, o = t.extend({}, e || {}),
                s = t.Deferred && t.Deferred();
            for (i in t.ajaxSettings) void 0 === o[i] && (o[i] = t.ajaxSettings[i]);
            d(o),
            o.crossDomain || (a = n.createElement("a"), a.href = o.url, a.href = a.href, o.crossDomain = l.protocol + "//" + l.host != a.protocol + "//" + a.host),
            o.url || (o.url = window.location.toString()),
            j(o);
            var u = o.dataType,
                f = /\?.+=\?/.test(o.url);
            if (f && (u = "jsonp"), o.cache !== !1 && (e && e.cache === !0 || "script" != u && "jsonp" != u) || (o.url = E(o.url, "_=" + Date.now())), "jsonp" == u) return f || (o.url = E(o.url, o.jsonp ? o.jsonp + "=?" : o.jsonp === !1 ? "" : "callback=?")),
            t.ajaxJSONP(o, s);
            var C, h = o.accepts[u],
                p = {},
                m = function (t, e) {
                    p[t.toLowerCase()] = [t, e]
                },
                x = /^([\w-]+:)\/\//.test(o.url) ? RegExp.$1 : window.location.protocol,
                S = o.xhr(),
                T = S.setRequestHeader;
            if (s && s.promise(S), o.crossDomain || m("X-Requested-With", "XMLHttpRequest"), m("Accept", h || "*/*"), (h = o.mimeType || h) && (h.indexOf(",") > -1 && (h = h.split(",", 2)[0]), S.overrideMimeType && S.overrideMimeType(h)), (o.contentType || o.contentType !== !1 && o.data && "GET" != o.type.toUpperCase()) && m("Content-Type", o.contentType || "application/x-www-form-urlencoded"), o.headers) for (r in o.headers) m(r, o.headers[r]);
            if (S.setRequestHeader = m, S.onreadystatechange = function () {
                    if (4 == S.readyState) {
                        S.onreadystatechange = b,
                        clearTimeout(C);
                        var e, n = !1;
                        if (S.status >= 200 && S.status < 300 || 304 == S.status || 0 == S.status && "file:" == x) {
                            u = u || w(o.mimeType || S.getResponseHeader("content-type")),
                            e = S.responseText;
                            try {
                                "script" == u ? (1, eval)(e) : "xml" == u ? e = S.responseXML : "json" == u && (e = c.test(e) ? null : t.parseJSON(e))
                            } catch (i) {
                                n = i
                            }
                            n ? y(n, "parsererror", S, o, s) : v(e, S, o, s)
                        } else y(S.statusText || null, S.status ? "error" : "abort", S, o, s)
                    }
                }, g(S, o) === !1) return S.abort(),
            y(null, "abort", S, o, s),
            S;
            if (o.xhrFields) for (r in o.xhrFields) S[r] = o.xhrFields[r];
            var N = "async" in o ? o.async : !0;
            S.open(o.type, o.url, N, o.username, o.password);
            for (r in p) T.apply(S, p[r]);
            return o.timeout > 0 && (C = setTimeout(function () {
                    S.onreadystatechange = b,
                    S.abort(),
                    y(null, "timeout", S, o, s)
                }, o.timeout)),
            S.send(o.data ? o.data : null),
            S
        },
    t.get = function () {
            return t.ajax(S.apply(null, arguments))
        },
    t.post = function () {
            var e = S.apply(null, arguments);
            return e.type = "POST",
            t.ajax(e)
        },
    t.getJSON = function () {
            var e = S.apply(null, arguments);
            return e.dataType = "json",
            t.ajax(e)
        },
    t.fn.load = function (e, n, i) {
            if (!this.length) return this;
            var a, r = this,
                s = e.split(/\s/),
                u = S(e, n, i),
                f = u.success;
            return s.length > 1 && (u.url = s[0], a = s[1]),
            u.success = function (e) {
                    r.html(a ? t("<div>").html(e.replace(o, "")).find(a) : e),
                    f && f.apply(r, arguments)
                },
            t.ajax(u),
            this
        };
    var T = encodeURIComponent;
    t.param = function (e, n) {
            var i = [];
            return i.add = function (e, n) {
                t.isFunction(n) && (n = n()),
                null == n && (n = ""),
                this.push(T(e) + "=" + T(n))
            },
            C(i, e, n),
            i.join("&").replace(/%20/g, "+")
        }
}(Zepto),


function (t) {
    t.fn.serializeArray = function () {
        var e, n, i = [],
            r = function (t) {
                return t.forEach ? t.forEach(r) : void i.push({
                    name: e,
                    value: t
                })
            };
        return this[0] && t.each(this[0].elements, function (i, o) {
                n = o.type,
                e = o.name,
                e && "fieldset" != o.nodeName.toLowerCase() && !o.disabled && "submit" != n && "reset" != n && "button" != n && "file" != n && ("radio" != n && "checkbox" != n || o.checked) && r(t(o).val())
            }),
        i
    },
    t.fn.serialize = function () {
        var t = [];
        return this.serializeArray().forEach(function (e) {
            t.push(encodeURIComponent(e.name) + "=" + encodeURIComponent(e.value))
        }),
        t.join("&")
    },
    t.fn.submit = function (e) {
        if (0 in arguments) this.bind("submit", e);
        else if (this.length) {
            var n = t.Event("submit");
            this.eq(0).trigger(n),
            n.isDefaultPrevented() || this.get(0).submit()
        }
        return this
    }
}(Zepto),


function (t) {
    "__proto__" in {} || t.extend(t.zepto, {
        Z: function (e, n) {
            return e = e || [],
            t.extend(e, t.fn),
            e.selector = n || "",
            e.__Z = !0,
            e
        },
        isZ: function (e) {
            return "array" === t.type(e) && "__Z" in e
        }
    });
    try {
        getComputedStyle(void 0)
    } catch (e) {
        var n = getComputedStyle;
        window.getComputedStyle = function (t) {
            try {
                return n(t)
            } catch (e) {
                return null
            }
        }
    }
}(Zepto);

/* Zepto cookie */
(function (a) {
    a.extend(a.fn, {
        cookie: function (b, c, d) {
            var e, f, g, h;
            if (arguments.length > 1 && String(c) !== "[object Object]") {
                d = a.extend({}, d);
                if (c === null || c === undefined) d.expires = -1;
                return typeof d.expires == "number" && (e = d.expires * 24 * 60 * 60 * 1e3, f = d.expires = new Date, f.setTime(f.getTime() + e)),
                c = String(c),
                document.cookie = [encodeURIComponent(b), "=", d.raw ? c : encodeURIComponent(c), d.expires ? "; expires=" + d.expires.toUTCString() : "", d.path ? "; path=" + d.path : "", d.domain ? "; domain=" + d.domain : "", d.secure ? "; secure" : ""].join("")
            }
            return d = c || {},
            h = d.raw ?
            function (a) {
                return a
            } : decodeURIComponent,
            (g = (new RegExp("(?:^|; )" + encodeURIComponent(b) + "=([^;]*)")).exec(document.cookie)) ? h(g[1]) : null
        }
    })
})(Zepto);

/* touch.js */
(function ($) {
    var touch = {},
        touchTimeout, tapTimeout, swipeTimeout, longTapTimeout, longTapDelay = 750,
        gesture;

    function swipeDirection(x1, x2, y1, y2) {
            return Math.abs(x1 - x2) >= Math.abs(y1 - y2) ? (x1 - x2 > 0 ? "Left" : "Right") : (y1 - y2 > 0 ? "Up" : "Down")
        }
    function longTap() {
            longTapTimeout = null;
            if (touch.last) {
                touch.el.trigger("longTap");
                touch = {}
            }
        }
    function cancelLongTap() {
            if (longTapTimeout) {
                clearTimeout(longTapTimeout)
            }
            longTapTimeout = null
        }
    function cancelAll() {
            if (touchTimeout) {
                clearTimeout(touchTimeout)
            }
            if (tapTimeout) {
                clearTimeout(tapTimeout)
            }
            if (swipeTimeout) {
                clearTimeout(swipeTimeout)
            }
            if (longTapTimeout) {
                clearTimeout(longTapTimeout)
            }
            touchTimeout = tapTimeout = swipeTimeout = longTapTimeout = null;
            touch = {}
        }
    function isPrimaryTouch(event) {
            return (event.pointerType == "touch" || event.pointerType == event.MSPOINTER_TYPE_TOUCH) && event.isPrimary
        }
    function isPointerEventType(e, type) {
            return (e.type == "pointer" + type || e.type.toLowerCase() == "mspointer" + type)
        }
    $(document).ready(function () {
            var now, delta, deltaX = 0,
                deltaY = 0,
                firstTouch, _isPointerType;
            if ("MSGesture" in window) {
                    gesture = new MSGesture();
                    gesture.target = document.body
                }
            $(document).bind("MSGestureEnd", function (e) {
                    var swipeDirectionFromVelocity = e.velocityX > 1 ? "Right" : e.velocityX < -1 ? "Left" : e.velocityY > 1 ? "Down" : e.velocityY < -1 ? "Up" : null;
                    if (swipeDirectionFromVelocity) {
                        touch.el.trigger("swipe");
                        touch.el.trigger("swipe" + swipeDirectionFromVelocity)
                    }
                }).on("touchstart MSPointerDown pointerdown", function (e) {
                    if ((_isPointerType = isPointerEventType(e, "down")) && !isPrimaryTouch(e)) {
                        return
                    }
                    firstTouch = _isPointerType ? e : e.touches[0];
                    if (e.touches && e.touches.length === 1 && touch.x2) {
                        touch.x2 = undefined;
                        touch.y2 = undefined
                    }
                    now = Date.now();
                    delta = now - (touch.last || now);
                    touch.el = $("tagName" in firstTouch.target ? firstTouch.target : firstTouch.target.parentNode);
                    touchTimeout && clearTimeout(touchTimeout);
                    touch.x1 = firstTouch.pageX;
                    touch.y1 = firstTouch.pageY;
                    if (delta > 0 && delta <= 250) {
                        touch.isDoubleTap = true
                    }
                    touch.last = now;
                    longTapTimeout = setTimeout(longTap, longTapDelay);
                    if (gesture && _isPointerType) {
                        gesture.addPointer(e.pointerId)
                    }
                }).on("touchmove MSPointerMove pointermove", function (e) {
                    if ((_isPointerType = isPointerEventType(e, "move")) && !isPrimaryTouch(e)) {
                        return
                    }
                    firstTouch = _isPointerType ? e : e.touches[0];
                    cancelLongTap();
                    touch.x2 = firstTouch.pageX;
                    touch.y2 = firstTouch.pageY;
                    deltaX += Math.abs(touch.x1 - touch.x2);
                    deltaY += Math.abs(touch.y1 - touch.y2)
                }).on("touchend MSPointerUp pointerup", function (e) {
                    if ((_isPointerType = isPointerEventType(e, "up")) && !isPrimaryTouch(e)) {
                        return
                    }
                    cancelLongTap();
                    if ((touch.x2 && Math.abs(touch.x1 - touch.x2) > 30) || (touch.y2 && Math.abs(touch.y1 - touch.y2) > 30)) {
                        swipeTimeout = setTimeout(function () {
                            touch.el.trigger("swipe");
                            touch.el.trigger("swipe" + (swipeDirection(touch.x1, touch.x2, touch.y1, touch.y2)));
                            touch = {}
                        }, 0)
                    } else {
                        if ("last" in touch) {
                            if (deltaX < 30 && deltaY < 30) {
                                tapTimeout = setTimeout(function () {
                                    var event = $.Event("tap");
                                    event.cancelTouch = cancelAll;
                                    touch.el.trigger(event);
                                    if (touch.isDoubleTap) {
                                        if (touch.el) {
                                            touch.el.trigger("doubleTap")
                                        }
                                        touch = {}
                                    } else {
                                        touchTimeout = setTimeout(function () {
                                            touchTimeout = null;
                                            if (touch.el) {
                                                touch.el.trigger("singleTap")
                                            }
                                            touch = {}
                                        }, 250)
                                    }
                                }, 0)
                            } else {
                                touch = {}
                            }
                        }
                    }
                    deltaX = deltaY = 0
                }).on("touchcancel MSPointerCancel pointercancel", cancelAll);
            $(window).on("scroll", cancelAll)
        });
        ["swipe", "swipeLeft", "swipeRight", "swipeUp", "swipeDown", "doubleTap", "tap", "singleTap", "longTap"].forEach(function (eventName) {
            $.fn[eventName] = function (callback) {
                return this.on(eventName, callback)
            }
        })
})(Zepto);

/* flexible_css.js */
!
function () {
    var a = "@charset \"utf-8\";html{color:#000;background:#fff;overflow-y:scroll;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%}html *{outline:0;-webkit-text-size-adjust:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}html,body{font-family:sans-serif}body,div,dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,code,form,fieldset,legend,input,textarea,p,blockquote,th,td,hr,button,article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{margin:0;padding:0}input,select,textarea{font-size:100%}table{border-collapse:collapse;border-spacing:0}fieldset,img{border:0}abbr,acronym{border:0;font-variant:normal}del{text-decoration:line-through}address,caption,cite,code,dfn,em,th,var{font-style:normal;font-weight:500}ol,ul{list-style:none}caption,th{text-align:left}h1,h2,h3,h4,h5,h6{font-size:100%;font-weight:500}q:before,q:after{content:''}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}a:hover{text-decoration:underline}ins,a{text-decoration:none}",
        b = document.createElement("style");
    if (document.getElementsByTagName("head")[0].appendChild(b), b.styleSheet) b.styleSheet.disabled || (b.styleSheet.cssText = a);
    else try {
            b.innerHTML = a
        } catch (c) {
            b.innerText = a
        }
}();

/* flexible.debug.js */
(function (win, lib) {
    var doc = win.document;
    var docEl = doc.documentElement;
    var metaEl = doc.querySelector('meta[name="viewport"]');
    var flexibleEl = doc.querySelector('meta[name="flexible"]');
    var dpr = 0;
    var scale = 0;
    var tid;
    var flexible = lib.flexible || (lib.flexible = {});
    if (metaEl) {
        console.warn("meta");
        var match = metaEl.getAttribute("content").match(/initial\-scale=([\d\.]+)/);
        if (match) {
            scale = parseFloat(match[1]);
            dpr = parseInt(1 / scale)
        }
    } else {
        if (flexibleEl) {
            var content = flexibleEl.getAttribute("content");
            if (content) {
                var initialDpr = content.match(/initial\-dpr=([\d\.]+)/);
                var maximumDpr = content.match(/maximum\-dpr=([\d\.]+)/);
                if (initialDpr) {
                    dpr = parseFloat(initialDpr[1]);
                    scale = parseFloat((1 / dpr).toFixed(2))
                }
                if (maximumDpr) {
                    dpr = parseFloat(maximumDpr[1]);
                    scale = parseFloat((1 / dpr).toFixed(2))
                }
            }
        }
    }
    if (!dpr && !scale) {
        var isAndroid = win.navigator.appVersion.match(/android/gi);
        var isIPhone = win.navigator.appVersion.match(/iphone/gi);
        var devicePixelRatio = win.devicePixelRatio;
        if (isIPhone) {
            if (devicePixelRatio >= 3 && (!dpr || dpr >= 3)) {
                dpr = 3
            } else {
                if (devicePixelRatio >= 2 && (!dpr || dpr >= 2)) {
                    dpr = 2
                } else {
                    dpr = 1
                }
            }
        } else {
            dpr = 1
        }
        scale = 1 / dpr
    }
    docEl.setAttribute("data-dpr", dpr);
    if (!metaEl) {
        metaEl = doc.createElement("meta");
        metaEl.setAttribute("name", "viewport");
        if (docEl.firstElementChild) {
            docEl.firstElementChild.appendChild(metaEl)
        } else {
            var wrap = doc.createElement("div");
            wrap.appendChild(metaEl);
            doc.write(wrap.innerHTML)
        }
    }
    function refreshRem() {
        var width = docEl.getBoundingClientRect().width;
        if (width / dpr > 540) {
            width = 540 * dpr
        }
        var rem = width / 10;
        docEl.style.fontSize = rem + "px";
        flexible.rem = win.rem = rem
    }
    win.addEventListener("resize", function () {
        clearTimeout(tid);
        tid = setTimeout(refreshRem, 300)
    }, false);
    win.addEventListener("pageshow", function (e) {
        if (e.persisted) {
            clearTimeout(tid);
            tid = setTimeout(refreshRem, 300)
        }
    }, false);
    if (doc.readyState === "complete") {
        doc.body.style.fontSize = 12 * dpr + "px"
    } else {
        doc.addEventListener("DOMContentLoaded", function (e) {
            doc.body.style.fontSize = 12 * dpr + "px"
        }, false)
    }
    refreshRem();
    flexible.dpr = win.dpr = dpr;
    flexible.refreshRem = refreshRem;
    flexible.rem2px = function (d) {
        var val = parseFloat(d) * this.rem;
        if (typeof d === "string" && d.match(/rem$/)) {
            val += "px"
        }
        return val
    };
    flexible.px2rem = function (d) {
        var val = parseFloat(d) / this.rem;
        if (typeof d === "string" && d.match(/px$/)) {
            val += "rem"
        }
        return val
    }
})(window, window["lib"] || (window["lib"] = {}));

/* json2.js */
if (typeof JSON !== "object") {
    JSON = {}
}(function () {
    function f(n) {
        return n < 10 ? "0" + n : n
    }
    if (typeof Date.prototype.toJSON !== "function") {
        Date.prototype.toJSON = function () {
            return isFinite(this.valueOf()) ? this.getUTCFullYear() + "-" + f(this.getUTCMonth() + 1) + "-" + f(this.getUTCDate()) + "T" + f(this.getUTCHours()) + ":" + f(this.getUTCMinutes()) + ":" + f(this.getUTCSeconds()) + "Z" : null
        };
        String.prototype.toJSON = Number.prototype.toJSON = Boolean.prototype.toJSON = function () {
            return this.valueOf()
        }
    }
    var cx, escapable, gap, indent, meta, rep;

    function quote(string) {
        escapable.lastIndex = 0;
        return escapable.test(string) ? '"' + string.replace(escapable, function (a) {
            var c = meta[a];
            return typeof c === "string" ? c : "\\u" + ("0000" + a.charCodeAt(0).toString(16)).slice(-4)
        }) + '"' : '"' + string + '"'
    }
    function str(key, holder) {
        var i, k, v, length, mind = gap,
            partial, value = holder[key];
        if (value && typeof value === "object" && typeof value.toJSON === "function") {
                value = value.toJSON(key)
            }
        if (typeof rep === "function") {
                value = rep.call(holder, key, value)
            }
        switch (typeof value) {
            case "string":
                return quote(value);
            case "number":
                return isFinite(value) ? String(value) : "null";
            case "boolean":
            case "null":
                return String(value);
            case "object":
                if (!value) {
                    return "null"
                }
                gap += indent;
                partial = [];
                if (Object.prototype.toString.apply(value) === "[object Array]") {
                    length = value.length;
                    for (i = 0; i < length; i += 1) {
                        partial[i] = str(i, value) || "null"
                    }
                    v = partial.length === 0 ? "[]" : gap ? "[\n" + gap + partial.join(",\n" + gap) + "\n" + mind + "]" : "[" + partial.join(",") + "]";
                    gap = mind;
                    return v
                }
                if (rep && typeof rep === "object") {
                    length = rep.length;
                    for (i = 0; i < length; i += 1) {
                        if (typeof rep[i] === "string") {
                            k = rep[i];
                            v = str(k, value);
                            if (v) {
                                partial.push(quote(k) + (gap ? ": " : ":") + v)
                            }
                        }
                    }
                } else {
                    for (k in value) {
                        if (Object.prototype.hasOwnProperty.call(value, k)) {
                            v = str(k, value);
                            if (v) {
                                partial.push(quote(k) + (gap ? ": " : ":") + v)
                            }
                        }
                    }
                }
                v = partial.length === 0 ? "{}" : gap ? "{\n" + gap + partial.join(",\n" + gap) + "\n" + mind + "}" : "{" + partial.join(",") + "}";
                gap = mind;
                return v
            }
    }
    if (typeof JSON.stringify !== "function") {
        escapable = /[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;
        meta = {
            "\b": "\\b",
            "\t": "\\t",
            "\n": "\\n",
            "\f": "\\f",
            "\r": "\\r",
            '"': '\\"',
            "\\": "\\\\"
        };
        JSON.stringify = function (value, replacer, space) {
            var i;
            gap = "";
            indent = "";
            if (typeof space === "number") {
                for (i = 0; i < space; i += 1) {
                    indent += " "
                }
            } else {
                if (typeof space === "string") {
                    indent = space
                }
            }
            rep = replacer;
            if (replacer && typeof replacer !== "function" && (typeof replacer !== "object" || typeof replacer.length !== "number")) {
                throw new Error("JSON.stringify")
            }
            return str("", {
                "": value
            })
        }
    }
    if (typeof JSON.parse !== "function") {
        cx = /[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;
        JSON.parse = function (text, reviver) {
            var j;

            function walk(holder, key) {
                var k, v, value = holder[key];
                if (value && typeof value === "object") {
                    for (k in value) {
                        if (Object.prototype.hasOwnProperty.call(value, k)) {
                            v = walk(value, k);
                            if (v !== undefined) {
                                value[k] = v
                            } else {
                                delete value[k]
                            }
                        }
                    }
                }
                return reviver.call(holder, key, value)
            }
            text = String(text);
            cx.lastIndex = 0;
            if (cx.test(text)) {
                text = text.replace(cx, function (a) {
                    return "\\u" + ("0000" + a.charCodeAt(0).toString(16)).slice(-4)
                })
            }
            if (/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g, "@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g, "]").replace(/(?:^|:|,)(?:\s*\[)+/g, ""))) {
                j = eval("(" + text + ")");
                return typeof reviver === "function" ? walk({
                    "": j
                }, "") : j
            }
            throw new SyntaxError("JSON.parse")
        }
    }
}());


/*! iScroll v5.1.2 ~ (c) 2008-2014 Matteo Spinelli ~ http://cubiq.org/license */
(function (window, document, Math) {
    var rAF = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame ||
    function (callback) {
        window.setTimeout(callback, 1000 / 60)
    };
    var utils = (function () {
        var me = {};
        var _elementStyle = document.createElement("div").style;
        var _vendor = (function () {
            var vendors = ["t", "webkitT", "MozT", "msT", "OT"],
                transform, i = 0,
                l = vendors.length;
            for (; i < l; i++) {
                    transform = vendors[i] + "ransform";
                    if (transform in _elementStyle) {
                        return vendors[i].substr(0, vendors[i].length - 1)
                    }
                }
            return false
        })();

        function _prefixStyle(style) {
            if (_vendor === false) {
                return false
            }
            if (_vendor === "") {
                return style
            }
            return _vendor + style.charAt(0).toUpperCase() + style.substr(1)
        }
        me.getTime = Date.now ||
        function getTime() {
            return new Date().getTime()
        };
        me.extend = function (target, obj) {
            for (var i in obj) {
                target[i] = obj[i]
            }
        };
        me.addEvent = function (el, type, fn, capture) {
            el.addEventListener(type, fn, !! capture)
        };
        me.removeEvent = function (el, type, fn, capture) {
            el.removeEventListener(type, fn, !! capture)
        };
        me.prefixPointerEvent = function (pointerEvent) {
            return window.MSPointerEvent ? "MSPointer" + pointerEvent.charAt(9).toUpperCase() + pointerEvent.substr(10) : pointerEvent
        };
        me.momentum = function (current, start, time, lowerMargin, wrapperSize, deceleration) {
            var distance = current - start,
                speed = Math.abs(distance) / time,
                destination, duration;
            deceleration = deceleration === undefined ? 0.0006 : deceleration;
            destination = current + (speed * speed) / (2 * deceleration) * (distance < 0 ? -1 : 1);
            duration = speed / deceleration;
            if (destination < lowerMargin) {
                    destination = wrapperSize ? lowerMargin - (wrapperSize / 2.5 * (speed / 8)) : lowerMargin;
                    distance = Math.abs(destination - current);
                    duration = distance / speed
                } else {
                    if (destination > 0) {
                        destination = wrapperSize ? wrapperSize / 2.5 * (speed / 8) : 0;
                        distance = Math.abs(current) + destination;
                        duration = distance / speed
                    }
                }
            return {
                    destination: Math.round(destination),
                    duration: duration
                }
        };
        var _transform = _prefixStyle("transform");
        me.extend(me, {
            hasTransform: _transform !== false,
            hasPerspective: _prefixStyle("perspective") in _elementStyle,
            hasTouch: "ontouchstart" in window,
            hasPointer: window.PointerEvent || window.MSPointerEvent,
            hasTransition: _prefixStyle("transition") in _elementStyle
        });
        me.isBadAndroid = /Android /.test(window.navigator.appVersion) && !(/Chrome\/\d/.test(window.navigator.appVersion));
        me.extend(me.style = {}, {
            transform: _transform,
            transitionTimingFunction: _prefixStyle("transitionTimingFunction"),
            transitionDuration: _prefixStyle("transitionDuration"),
            transitionDelay: _prefixStyle("transitionDelay"),
            transformOrigin: _prefixStyle("transformOrigin")
        });
        me.hasClass = function (e, c) {
            var re = new RegExp("(^|\\s)" + c + "(\\s|$)");
            return re.test(e.className)
        };
        me.addClass = function (e, c) {
            if (me.hasClass(e, c)) {
                return
            }
            var newclass = e.className.split(" ");
            newclass.push(c);
            e.className = newclass.join(" ")
        };
        me.removeClass = function (e, c) {
            if (!me.hasClass(e, c)) {
                return
            }
            var re = new RegExp("(^|\\s)" + c + "(\\s|$)", "g");
            e.className = e.className.replace(re, " ")
        };
        me.offset = function (el) {
            var left = -el.offsetLeft,
                top = -el.offsetTop;
            while (el = el.offsetParent) {
                    left -= el.offsetLeft;
                    top -= el.offsetTop
                }
            return {
                    left: left,
                    top: top
                }
        };
        me.preventDefaultException = function (el, exceptions) {
            for (var i in exceptions) {
                if (exceptions[i].test(el[i])) {
                    return true
                }
            }
            return false
        };
        me.extend(me.eventType = {}, {
            touchstart: 1,
            touchmove: 1,
            touchend: 1,
            mousedown: 2,
            mousemove: 2,
            mouseup: 2,
            pointerdown: 3,
            pointermove: 3,
            pointerup: 3,
            MSPointerDown: 3,
            MSPointerMove: 3,
            MSPointerUp: 3
        });
        me.extend(me.ease = {}, {
            quadratic: {
                style: "cubic-bezier(0.25, 0.46, 0.45, 0.94)",
                fn: function (k) {
                    return k * (2 - k)
                }
            },
            circular: {
                style: "cubic-bezier(0.1, 0.57, 0.1, 1)",
                fn: function (k) {
                    return Math.sqrt(1 - (--k * k))
                }
            },
            back: {
                style: "cubic-bezier(0.175, 0.885, 0.32, 1.275)",
                fn: function (k) {
                    var b = 4;
                    return (k = k - 1) * k * ((b + 1) * k + b) + 1
                }
            },
            bounce: {
                style: "",
                fn: function (k) {
                    if ((k /= 1) < (1 / 2.75)) {
                        return 7.5625 * k * k
                    } else {
                        if (k < (2 / 2.75)) {
                            return 7.5625 * (k -= (1.5 / 2.75)) * k + 0.75
                        } else {
                            if (k < (2.5 / 2.75)) {
                                return 7.5625 * (k -= (2.25 / 2.75)) * k + 0.9375
                            } else {
                                return 7.5625 * (k -= (2.625 / 2.75)) * k + 0.984375
                            }
                        }
                    }
                }
            },
            elastic: {
                style: "",
                fn: function (k) {
                    var f = 0.22,
                        e = 0.4;
                    if (k === 0) {
                            return 0
                        }
                    if (k == 1) {
                            return 1
                        }
                    return (e * Math.pow(2, -10 * k) * Math.sin((k - f / 4) * (2 * Math.PI) / f) + 1)
                }
            }
        });
        me.tap = function (e, eventName) {
            var ev = document.createEvent("Event");
            ev.initEvent(eventName, true, true);
            ev.pageX = e.pageX;
            ev.pageY = e.pageY;
            e.target.dispatchEvent(ev)
        };
        me.click = function (e) {
            var target = e.target,
                ev;
            if (!(/(SELECT|INPUT|TEXTAREA)/i).test(target.tagName)) {
                    ev = document.createEvent("MouseEvents");
                    ev.initMouseEvent("click", true, true, e.view, 1, target.screenX, target.screenY, target.clientX, target.clientY, e.ctrlKey, e.altKey, e.shiftKey, e.metaKey, 0, null);
                    ev._constructed = true;
                    target.dispatchEvent(ev)
                }
        };
        return me
    })();

    function IScroll(el, options) {
        this.wrapper = typeof el == "string" ? document.querySelector(el) : el;
        this.scroller = this.wrapper.children[0];
        this.scrollerStyle = this.scroller.style;
        this.options = {
            resizeScrollbars: true,
            mouseWheelSpeed: 20,
            snapThreshold: 0.334,
            startX: 0,
            startY: 0,
            scrollY: true,
            directionLockThreshold: 5,
            momentum: true,
            bounce: true,
            bounceTime: 600,
            bounceEasing: "",
            preventDefault: true,
            preventDefaultException: {
                tagName: /^(INPUT|TEXTAREA|BUTTON|SELECT)$/
            },
            HWCompositing: true,
            useTransition: true,
            useTransform: true
        };
        for (var i in options) {
            this.options[i] = options[i]
        }
        this.translateZ = this.options.HWCompositing && utils.hasPerspective ? " translateZ(0)" : "";
        this.options.useTransition = utils.hasTransition && this.options.useTransition;
        this.options.useTransform = utils.hasTransform && this.options.useTransform;
        this.options.eventPassthrough = this.options.eventPassthrough === true ? "vertical" : this.options.eventPassthrough;
        this.options.preventDefault = !this.options.eventPassthrough && this.options.preventDefault;
        this.options.scrollY = this.options.eventPassthrough == "vertical" ? false : this.options.scrollY;
        this.options.scrollX = this.options.eventPassthrough == "horizontal" ? false : this.options.scrollX;
        this.options.freeScroll = this.options.freeScroll && !this.options.eventPassthrough;
        this.options.directionLockThreshold = this.options.eventPassthrough ? 0 : this.options.directionLockThreshold;
        this.options.bounceEasing = typeof this.options.bounceEasing == "string" ? utils.ease[this.options.bounceEasing] || utils.ease.circular : this.options.bounceEasing;
        this.options.resizePolling = this.options.resizePolling === undefined ? 60 : this.options.resizePolling;
        if (this.options.tap === true) {
            this.options.tap = "tap"
        }
        if (this.options.shrinkScrollbars == "scale") {
            this.options.useTransition = false
        }
        this.options.invertWheelDirection = this.options.invertWheelDirection ? -1 : 1;
        if (this.options.probeType == 3) {
            this.options.useTransition = false
        }
        this.x = 0;
        this.y = 0;
        this.directionX = 0;
        this.directionY = 0;
        this._events = {};
        this._init();
        this.refresh();
        this.scrollTo(this.options.startX, this.options.startY);
        this.enable()
    }
    IScroll.prototype = {
        version: "5.1.2",
        _init: function () {
            this._initEvents();
            if (this.options.scrollbars || this.options.indicators) {
                this._initIndicators()
            }
            if (this.options.mouseWheel) {
                this._initWheel()
            }
            if (this.options.snap) {
                this._initSnap()
            }
            if (this.options.keyBindings) {
                this._initKeys()
            }
        },
        destroy: function () {
            this._initEvents(true);
            this._execEvent("destroy")
        },
        _transitionEnd: function (e) {
            if (e.target != this.scroller || !this.isInTransition) {
                return
            }
            this._transitionTime();
            if (!this.resetPosition(this.options.bounceTime)) {
                this.isInTransition = false;
                this._execEvent("scrollEnd")
            }
        },
        _start: function (e) {
            if (utils.eventType[e.type] != 1) {
                if (e.button !== 0) {
                    return
                }
            }
            if (!this.enabled || (this.initiated && utils.eventType[e.type] !== this.initiated)) {
                return
            }
            if (this.options.preventDefault && !utils.isBadAndroid && !utils.preventDefaultException(e.target, this.options.preventDefaultException)) {
                e.preventDefault()
            }
            var point = e.touches ? e.touches[0] : e,
                pos;
            this.initiated = utils.eventType[e.type];
            this.moved = false;
            this.distX = 0;
            this.distY = 0;
            this.directionX = 0;
            this.directionY = 0;
            this.directionLocked = 0;
            this._transitionTime();
            this.startTime = utils.getTime();
            if (this.options.useTransition && this.isInTransition) {
                    this.isInTransition = false;
                    pos = this.getComputedPosition();
                    this._translate(Math.round(pos.x), Math.round(pos.y));
                    this._execEvent("scrollEnd")
                } else {
                    if (!this.options.useTransition && this.isAnimating) {
                        this.isAnimating = false;
                        this._execEvent("scrollEnd")
                    }
                }
            this.startX = this.x;
            this.startY = this.y;
            this.absStartX = this.x;
            this.absStartY = this.y;
            this.pointX = point.pageX;
            this.pointY = point.pageY;
            this._execEvent("beforeScrollStart")
        },
        _move: function (e) {
            if (!this.enabled || utils.eventType[e.type] !== this.initiated) {
                return
            }
            if (this.options.preventDefault) {
                e.preventDefault()
            }
            var point = e.touches ? e.touches[0] : e,
                deltaX = point.pageX - this.pointX,
                deltaY = point.pageY - this.pointY,
                timestamp = utils.getTime(),
                newX, newY, absDistX, absDistY;
            this.pointX = point.pageX;
            this.pointY = point.pageY;
            this.distX += deltaX;
            this.distY += deltaY;
            absDistX = Math.abs(this.distX);
            absDistY = Math.abs(this.distY);
            if (timestamp - this.endTime > 300 && (absDistX < 10 && absDistY < 10)) {
                    return
                }
            if (!this.directionLocked && !this.options.freeScroll) {
                    if (absDistX > absDistY + this.options.directionLockThreshold) {
                        this.directionLocked = "h"
                    } else {
                        if (absDistY >= absDistX + this.options.directionLockThreshold) {
                            this.directionLocked = "v"
                        } else {
                            this.directionLocked = "n"
                        }
                    }
                }
            if (this.directionLocked == "h") {
                    if (this.options.eventPassthrough == "vertical") {
                        e.preventDefault()
                    } else {
                        if (this.options.eventPassthrough == "horizontal") {
                            this.initiated = false;
                            return
                        }
                    }
                    deltaY = 0
                } else {
                    if (this.directionLocked == "v") {
                        if (this.options.eventPassthrough == "horizontal") {
                            e.preventDefault()
                        } else {
                            if (this.options.eventPassthrough == "vertical") {
                                this.initiated = false;
                                return
                            }
                        }
                        deltaX = 0
                    }
                }
            deltaX = this.hasHorizontalScroll ? deltaX : 0;
            deltaY = this.hasVerticalScroll ? deltaY : 0;
            newX = this.x + deltaX;
            newY = this.y + deltaY;
            if (newX > 0 || newX < this.maxScrollX) {
                    newX = this.options.bounce ? this.x + deltaX / 3 : newX > 0 ? 0 : this.maxScrollX
                }
            if (newY > 0 || newY < this.maxScrollY) {
                    newY = this.options.bounce ? this.y + deltaY / 3 : newY > 0 ? 0 : this.maxScrollY
                }
            this.directionX = deltaX > 0 ? -1 : deltaX < 0 ? 1 : 0;
            this.directionY = deltaY > 0 ? -1 : deltaY < 0 ? 1 : 0;
            if (!this.moved) {
                    this._execEvent("scrollStart")
                }
            this.moved = true;
            this._translate(newX, newY);
            if (timestamp - this.startTime > 300) {
                    this.startTime = timestamp;
                    this.startX = this.x;
                    this.startY = this.y;
                    if (this.options.probeType == 1) {
                        this._execEvent("scroll")
                    }
                }
            if (this.options.probeType > 1) {
                    this._execEvent("scroll")
                }
        },
        _end: function (e) {
            if (!this.enabled || utils.eventType[e.type] !== this.initiated) {
                return
            }
            if (this.options.preventDefault && !utils.preventDefaultException(e.target, this.options.preventDefaultException)) {
                e.preventDefault()
            }
            var point = e.changedTouches ? e.changedTouches[0] : e,
                momentumX, momentumY, duration = utils.getTime() - this.startTime,
                newX = Math.round(this.x),
                newY = Math.round(this.y),
                distanceX = Math.abs(newX - this.startX),
                distanceY = Math.abs(newY - this.startY),
                time = 0,
                easing = "";
            this.isInTransition = 0;
            this.initiated = 0;
            this.endTime = utils.getTime();
            if (this.resetPosition(this.options.bounceTime)) {
                    return
                }
            this.scrollTo(newX, newY);
            if (!this.moved) {
                    if (this.options.tap) {
                        utils.tap(e, this.options.tap)
                    }
                    if (this.options.click) {
                        utils.click(e)
                    }
                    this._execEvent("scrollCancel");
                    return
                }
            if (this._events.flick && duration < 200 && distanceX < 100 && distanceY < 100) {
                    this._execEvent("flick");
                    return
                }
            if (this.options.momentum && duration < 300) {
                    momentumX = this.hasHorizontalScroll ? utils.momentum(this.x, this.startX, duration, this.maxScrollX, this.options.bounce ? this.wrapperWidth : 0, this.options.deceleration) : {
                        destination: newX,
                        duration: 0
                    };
                    momentumY = this.hasVerticalScroll ? utils.momentum(this.y, this.startY, duration, this.maxScrollY, this.options.bounce ? this.wrapperHeight : 0, this.options.deceleration) : {
                        destination: newY,
                        duration: 0
                    };
                    newX = momentumX.destination;
                    newY = momentumY.destination;
                    time = Math.max(momentumX.duration, momentumY.duration);
                    this.isInTransition = 1
                }
            if (this.options.snap) {
                    var snap = this._nearestSnap(newX, newY);
                    this.currentPage = snap;
                    time = this.options.snapSpeed || Math.max(Math.max(Math.min(Math.abs(newX - snap.x), 1000), Math.min(Math.abs(newY - snap.y), 1000)), 300);
                    newX = snap.x;
                    newY = snap.y;
                    this.directionX = 0;
                    this.directionY = 0;
                    easing = this.options.bounceEasing
                }
            if (newX != this.x || newY != this.y) {
                    if (newX > 0 || newX < this.maxScrollX || newY > 0 || newY < this.maxScrollY) {
                        easing = utils.ease.quadratic
                    }
                    this.scrollTo(newX, newY, time, easing);
                    return
                }
            this._execEvent("scrollEnd")
        },
        _resize: function () {
            var that = this;
            clearTimeout(this.resizeTimeout);
            this.resizeTimeout = setTimeout(function () {
                that.refresh()
            }, this.options.resizePolling)
        },
        resetPosition: function (time) {
            var x = this.x,
                y = this.y;
            time = time || 0;
            if (!this.hasHorizontalScroll || this.x > 0) {
                    x = 0
                } else {
                    if (this.x < this.maxScrollX) {
                        x = this.maxScrollX
                    }
                }
            if (!this.hasVerticalScroll || this.y > 0) {
                    y = 0
                } else {
                    if (this.y < this.maxScrollY) {
                        y = this.maxScrollY
                    }
                }
            if (x == this.x && y == this.y) {
                    return false
                }
            this.scrollTo(x, y, time, this.options.bounceEasing);
            return true
        },
        disable: function () {
            this.enabled = false
        },
        enable: function () {
            this.enabled = true
        },
        refresh: function () {
            var rf = this.wrapper.offsetHeight;
            this.wrapperWidth = this.wrapper.clientWidth;
            this.wrapperHeight = this.wrapper.clientHeight;
            this.scrollerWidth = this.scroller.offsetWidth;
            this.scrollerHeight = this.scroller.offsetHeight;
            this.maxScrollX = this.wrapperWidth - this.scrollerWidth;
            this.maxScrollY = this.wrapperHeight - this.scrollerHeight;
            this.hasHorizontalScroll = this.options.scrollX && this.maxScrollX < 0;
            this.hasVerticalScroll = this.options.scrollY && this.maxScrollY < 0;
            if (!this.hasHorizontalScroll) {
                this.maxScrollX = 0;
                this.scrollerWidth = this.wrapperWidth
            }
            if (!this.hasVerticalScroll) {
                this.maxScrollY = 0;
                this.scrollerHeight = this.wrapperHeight
            }
            this.endTime = 0;
            this.directionX = 0;
            this.directionY = 0;
            this.wrapperOffset = utils.offset(this.wrapper);
            this._execEvent("refresh");
            this.resetPosition()
        },
        on: function (type, fn) {
            if (!this._events[type]) {
                this._events[type] = []
            }
            this._events[type].push(fn)
        },
        off: function (type, fn) {
            if (!this._events[type]) {
                return
            }
            var index = this._events[type].indexOf(fn);
            if (index > -1) {
                this._events[type].splice(index, 1)
            }
        },
        _execEvent: function (type) {
            if (!this._events[type]) {
                return
            }
            var i = 0,
                l = this._events[type].length;
            if (!l) {
                    return
                }
            for (; i < l; i++) {
                    this._events[type][i].apply(this, [].slice.call(arguments, 1))
                }
        },
        scrollBy: function (x, y, time, easing) {
            x = this.x + x;
            y = this.y + y;
            time = time || 0;
            this.scrollTo(x, y, time, easing)
        },
        scrollTo: function (x, y, time, easing) {
            easing = easing || utils.ease.circular;
            this.isInTransition = this.options.useTransition && time > 0;
            if (!time || (this.options.useTransition && easing.style)) {
                this._transitionTimingFunction(easing.style);
                this._transitionTime(time);
                this._translate(x, y)
            } else {
                this._animate(x, y, time, easing.fn)
            }
        },
        scrollToElement: function (el, time, offsetX, offsetY, easing) {
            el = el.nodeType ? el : this.scroller.querySelector(el);
            if (!el) {
                return
            }
            var pos = utils.offset(el);
            pos.left -= this.wrapperOffset.left;
            pos.top -= this.wrapperOffset.top;
            if (offsetX === true) {
                offsetX = Math.round(el.offsetWidth / 2 - this.wrapper.offsetWidth / 2)
            }
            if (offsetY === true) {
                offsetY = Math.round(el.offsetHeight / 2 - this.wrapper.offsetHeight / 2)
            }
            pos.left -= offsetX || 0;
            pos.top -= offsetY || 0;
            pos.left = pos.left > 0 ? 0 : pos.left < this.maxScrollX ? this.maxScrollX : pos.left;
            pos.top = pos.top > 0 ? 0 : pos.top < this.maxScrollY ? this.maxScrollY : pos.top;
            time = time === undefined || time === null || time === "auto" ? Math.max(Math.abs(this.x - pos.left), Math.abs(this.y - pos.top)) : time;
            this.scrollTo(pos.left, pos.top, time, easing)
        },
        _transitionTime: function (time) {
            time = time || 0;
            this.scrollerStyle[utils.style.transitionDuration] = time + "ms";
            if (!time && utils.isBadAndroid) {
                this.scrollerStyle[utils.style.transitionDuration] = "0.001s"
            }
            if (this.indicators) {
                for (var i = this.indicators.length; i--;) {
                    this.indicators[i].transitionTime(time)
                }
            }
        },
        _transitionTimingFunction: function (easing) {
            this.scrollerStyle[utils.style.transitionTimingFunction] = easing;
            if (this.indicators) {
                for (var i = this.indicators.length; i--;) {
                    this.indicators[i].transitionTimingFunction(easing)
                }
            }
        },
        _translate: function (x, y) {
            if (this.options.useTransform) {
                this.scrollerStyle[utils.style.transform] = "translate(" + x + "px," + y + "px)" + this.translateZ
            } else {
                x = Math.round(x);
                y = Math.round(y);
                this.scrollerStyle.left = x + "px";
                this.scrollerStyle.top = y + "px"
            }
            this.x = x;
            this.y = y;
            if (this.indicators) {
                for (var i = this.indicators.length; i--;) {
                    this.indicators[i].updatePosition()
                }
            }
        },
        _initEvents: function (remove) {
            var eventType = remove ? utils.removeEvent : utils.addEvent,
                target = this.options.bindToWrapper ? this.wrapper : window;
            eventType(window, "orientationchange", this);
            eventType(window, "resize", this);
            if (this.options.click) {
                    eventType(this.wrapper, "click", this, true)
                }
            if (!this.options.disableMouse) {
                    eventType(this.wrapper, "mousedown", this);
                    eventType(target, "mousemove", this);
                    eventType(target, "mousecancel", this);
                    eventType(target, "mouseup", this)
                }
            if (utils.hasPointer && !this.options.disablePointer) {
                    eventType(this.wrapper, utils.prefixPointerEvent("pointerdown"), this);
                    eventType(target, utils.prefixPointerEvent("pointermove"), this);
                    eventType(target, utils.prefixPointerEvent("pointercancel"), this);
                    eventType(target, utils.prefixPointerEvent("pointerup"), this)
                }
            if (utils.hasTouch && !this.options.disableTouch) {
                    eventType(this.wrapper, "touchstart", this);
                    eventType(target, "touchmove", this);
                    eventType(target, "touchcancel", this);
                    eventType(target, "touchend", this)
                }
            eventType(this.scroller, "transitionend", this);
            eventType(this.scroller, "webkitTransitionEnd", this);
            eventType(this.scroller, "oTransitionEnd", this);
            eventType(this.scroller, "MSTransitionEnd", this)
        },
        getComputedPosition: function () {
            var matrix = window.getComputedStyle(this.scroller, null),
                x, y;
            if (this.options.useTransform) {
                    matrix = matrix[utils.style.transform].split(")")[0].split(", ");
                    x = +(matrix[12] || matrix[4]);
                    y = +(matrix[13] || matrix[5])
                } else {
                    x = +matrix.left.replace(/[^-\d.]/g, "");
                    y = +matrix.top.replace(/[^-\d.]/g, "")
                }
            return {
                    x: x,
                    y: y
                }
        },
        _initIndicators: function () {
            var interactive = this.options.interactiveScrollbars,
                customStyle = typeof this.options.scrollbars != "string",
                indicators = [],
                indicator;
            var that = this;
            this.indicators = [];
            if (this.options.scrollbars) {
                    if (this.options.scrollY) {
                        indicator = {
                            el: createDefaultScrollbar("v", interactive, this.options.scrollbars),
                            interactive: interactive,
                            defaultScrollbars: true,
                            customStyle: customStyle,
                            resize: this.options.resizeScrollbars,
                            shrink: this.options.shrinkScrollbars,
                            fade: this.options.fadeScrollbars,
                            listenX: false
                        };
                        this.wrapper.appendChild(indicator.el);
                        indicators.push(indicator)
                    }
                    if (this.options.scrollX) {
                        indicator = {
                            el: createDefaultScrollbar("h", interactive, this.options.scrollbars),
                            interactive: interactive,
                            defaultScrollbars: true,
                            customStyle: customStyle,
                            resize: this.options.resizeScrollbars,
                            shrink: this.options.shrinkScrollbars,
                            fade: this.options.fadeScrollbars,
                            listenY: false
                        };
                        this.wrapper.appendChild(indicator.el);
                        indicators.push(indicator)
                    }
                }
            if (this.options.indicators) {
                    indicators = indicators.concat(this.options.indicators)
                }
            for (var i = indicators.length; i--;) {
                    this.indicators.push(new Indicator(this, indicators[i]))
                }
            function _indicatorsMap(fn) {
                    for (var i = that.indicators.length; i--;) {
                        fn.call(that.indicators[i])
                    }
                }
            if (this.options.fadeScrollbars) {
                    this.on("scrollEnd", function () {
                        _indicatorsMap(function () {
                            this.fade()
                        })
                    });
                    this.on("scrollCancel", function () {
                        _indicatorsMap(function () {
                            this.fade()
                        })
                    });
                    this.on("scrollStart", function () {
                        _indicatorsMap(function () {
                            this.fade(1)
                        })
                    });
                    this.on("beforeScrollStart", function () {
                        _indicatorsMap(function () {
                            this.fade(1, true)
                        })
                    })
                }
            this.on("refresh", function () {
                    _indicatorsMap(function () {
                        this.refresh()
                    })
                });
            this.on("destroy", function () {
                    _indicatorsMap(function () {
                        this.destroy()
                    });
                    delete this.indicators
                })
        },
        _initWheel: function () {
            utils.addEvent(this.wrapper, "wheel", this);
            utils.addEvent(this.wrapper, "mousewheel", this);
            utils.addEvent(this.wrapper, "DOMMouseScroll", this);
            this.on("destroy", function () {
                utils.removeEvent(this.wrapper, "wheel", this);
                utils.removeEvent(this.wrapper, "mousewheel", this);
                utils.removeEvent(this.wrapper, "DOMMouseScroll", this)
            })
        },
        _wheel: function (e) {
            if (!this.enabled) {
                return
            }
            e.preventDefault();
            e.stopPropagation();
            var wheelDeltaX, wheelDeltaY, newX, newY, that = this;
            if (this.wheelTimeout === undefined) {
                that._execEvent("scrollStart")
            }
            clearTimeout(this.wheelTimeout);
            this.wheelTimeout = setTimeout(function () {
                that._execEvent("scrollEnd");
                that.wheelTimeout = undefined
            }, 400);
            if ("deltaX" in e) {
                wheelDeltaX = -e.deltaX;
                wheelDeltaY = -e.deltaY
            } else {
                if ("wheelDeltaX" in e) {
                    wheelDeltaX = e.wheelDeltaX / 120 * this.options.mouseWheelSpeed;
                    wheelDeltaY = e.wheelDeltaY / 120 * this.options.mouseWheelSpeed
                } else {
                    if ("wheelDelta" in e) {
                        wheelDeltaX = wheelDeltaY = e.wheelDelta / 120 * this.options.mouseWheelSpeed
                    } else {
                        if ("detail" in e) {
                            wheelDeltaX = wheelDeltaY = -e.detail / 3 * this.options.mouseWheelSpeed
                        } else {
                            return
                        }
                    }
                }
            }
            wheelDeltaX *= this.options.invertWheelDirection;
            wheelDeltaY *= this.options.invertWheelDirection;
            if (!this.hasVerticalScroll) {
                wheelDeltaX = wheelDeltaY;
                wheelDeltaY = 0
            }
            if (this.options.snap) {
                newX = this.currentPage.pageX;
                newY = this.currentPage.pageY;
                if (wheelDeltaX > 0) {
                    newX--
                } else {
                    if (wheelDeltaX < 0) {
                        newX++
                    }
                }
                if (wheelDeltaY > 0) {
                    newY--
                } else {
                    if (wheelDeltaY < 0) {
                        newY++
                    }
                }
                this.goToPage(newX, newY);
                return
            }
            newX = this.x + Math.round(this.hasHorizontalScroll ? wheelDeltaX : 0);
            newY = this.y + Math.round(this.hasVerticalScroll ? wheelDeltaY : 0);
            if (newX > 0) {
                newX = 0
            } else {
                if (newX < this.maxScrollX) {
                    newX = this.maxScrollX
                }
            }
            if (newY > 0) {
                newY = 0
            } else {
                if (newY < this.maxScrollY) {
                    newY = this.maxScrollY
                }
            }
            this.scrollTo(newX, newY, 0);
            if (this.options.probeType > 1) {
                this._execEvent("scroll")
            }
        },
        _initSnap: function () {
            this.currentPage = {};
            if (typeof this.options.snap == "string") {
                this.options.snap = this.scroller.querySelectorAll(this.options.snap)
            }
            this.on("refresh", function () {
                var i = 0,
                    l, m = 0,
                    n, cx, cy, x = 0,
                    y, stepX = this.options.snapStepX || this.wrapperWidth,
                    stepY = this.options.snapStepY || this.wrapperHeight,
                    el;
                this.pages = [];
                if (!this.wrapperWidth || !this.wrapperHeight || !this.scrollerWidth || !this.scrollerHeight) {
                        return
                    }
                if (this.options.snap === true) {
                        cx = Math.round(stepX / 2);
                        cy = Math.round(stepY / 2);
                        while (x > -this.scrollerWidth) {
                            this.pages[i] = [];
                            l = 0;
                            y = 0;
                            while (y > -this.scrollerHeight) {
                                this.pages[i][l] = {
                                    x: Math.max(x, this.maxScrollX),
                                    y: Math.max(y, this.maxScrollY),
                                    width: stepX,
                                    height: stepY,
                                    cx: x - cx,
                                    cy: y - cy
                                };
                                y -= stepY;
                                l++
                            }
                            x -= stepX;
                            i++
                        }
                    } else {
                        el = this.options.snap;
                        l = el.length;
                        n = -1;
                        for (; i < l; i++) {
                            if (i === 0 || el[i].offsetLeft <= el[i - 1].offsetLeft) {
                                m = 0;
                                n++
                            }
                            if (!this.pages[m]) {
                                this.pages[m] = []
                            }
                            x = Math.max(-el[i].offsetLeft, this.maxScrollX);
                            y = Math.max(-el[i].offsetTop, this.maxScrollY);
                            cx = x - Math.round(el[i].offsetWidth / 2);
                            cy = y - Math.round(el[i].offsetHeight / 2);
                            this.pages[m][n] = {
                                x: x,
                                y: y,
                                width: el[i].offsetWidth,
                                height: el[i].offsetHeight,
                                cx: cx,
                                cy: cy
                            };
                            if (x > this.maxScrollX) {
                                m++
                            }
                        }
                    }
                this.goToPage(this.currentPage.pageX || 0, this.currentPage.pageY || 0, 0);
                if (this.options.snapThreshold % 1 === 0) {
                        this.snapThresholdX = this.options.snapThreshold;
                        this.snapThresholdY = this.options.snapThreshold
                    } else {
                        this.snapThresholdX = Math.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width * this.options.snapThreshold);
                        this.snapThresholdY = Math.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height * this.options.snapThreshold)
                    }
            });
            this.on("flick", function () {
                var time = this.options.snapSpeed || Math.max(Math.max(Math.min(Math.abs(this.x - this.startX), 1000), Math.min(Math.abs(this.y - this.startY), 1000)), 300);
                this.goToPage(this.currentPage.pageX + this.directionX, this.currentPage.pageY + this.directionY, time)
            })
        },
        _nearestSnap: function (x, y) {
            if (!this.pages.length) {
                return {
                    x: 0,
                    y: 0,
                    pageX: 0,
                    pageY: 0
                }
            }
            var i = 0,
                l = this.pages.length,
                m = 0;
            if (Math.abs(x - this.absStartX) < this.snapThresholdX && Math.abs(y - this.absStartY) < this.snapThresholdY) {
                    return this.currentPage
                }
            if (x > 0) {
                    x = 0
                } else {
                    if (x < this.maxScrollX) {
                        x = this.maxScrollX
                    }
                }
            if (y > 0) {
                    y = 0
                } else {
                    if (y < this.maxScrollY) {
                        y = this.maxScrollY
                    }
                }
            for (; i < l; i++) {
                    if (x >= this.pages[i][0].cx) {
                        x = this.pages[i][0].x;
                        break
                    }
                }
            l = this.pages[i].length;
            for (; m < l; m++) {
                    if (y >= this.pages[0][m].cy) {
                        y = this.pages[0][m].y;
                        break
                    }
                }
            if (i == this.currentPage.pageX) {
                    i += this.directionX;
                    if (i < 0) {
                        i = 0
                    } else {
                        if (i >= this.pages.length) {
                            i = this.pages.length - 1
                        }
                    }
                    x = this.pages[i][0].x
                }
            if (m == this.currentPage.pageY) {
                    m += this.directionY;
                    if (m < 0) {
                        m = 0
                    } else {
                        if (m >= this.pages[0].length) {
                            m = this.pages[0].length - 1
                        }
                    }
                    y = this.pages[0][m].y
                }
            return {
                    x: x,
                    y: y,
                    pageX: i,
                    pageY: m
                }
        },
        goToPage: function (x, y, time, easing) {
            easing = easing || this.options.bounceEasing;
            if (x >= this.pages.length) {
                x = this.pages.length - 1
            } else {
                if (x < 0) {
                    x = 0
                }
            }
            if (y >= this.pages[x].length) {
                y = this.pages[x].length - 1
            } else {
                if (y < 0) {
                    y = 0
                }
            }
            var posX = this.pages[x][y].x,
                posY = this.pages[x][y].y;
            time = time === undefined ? this.options.snapSpeed || Math.max(Math.max(Math.min(Math.abs(posX - this.x), 1000), Math.min(Math.abs(posY - this.y), 1000)), 300) : time;
            this.currentPage = {
                    x: posX,
                    y: posY,
                    pageX: x,
                    pageY: y
                };
            this.scrollTo(posX, posY, time, easing)
        },
        next: function (time, easing) {
            var x = this.currentPage.pageX,
                y = this.currentPage.pageY;
            x++;
            if (x >= this.pages.length && this.hasVerticalScroll) {
                    x = 0;
                    y++
                }
            this.goToPage(x, y, time, easing)
        },
        prev: function (time, easing) {
            var x = this.currentPage.pageX,
                y = this.currentPage.pageY;
            x--;
            if (x < 0 && this.hasVerticalScroll) {
                    x = 0;
                    y--
                }
            this.goToPage(x, y, time, easing)
        },
        _initKeys: function (e) {
            var keys = {
                pageUp: 33,
                pageDown: 34,
                end: 35,
                home: 36,
                left: 37,
                up: 38,
                right: 39,
                down: 40
            };
            var i;
            if (typeof this.options.keyBindings == "object") {
                for (i in this.options.keyBindings) {
                    if (typeof this.options.keyBindings[i] == "string") {
                        this.options.keyBindings[i] = this.options.keyBindings[i].toUpperCase().charCodeAt(0)
                    }
                }
            } else {
                this.options.keyBindings = {}
            }
            for (i in keys) {
                this.options.keyBindings[i] = this.options.keyBindings[i] || keys[i]
            }
            utils.addEvent(window, "keydown", this);
            this.on("destroy", function () {
                utils.removeEvent(window, "keydown", this)
            })
        },
        _key: function (e) {
            if (!this.enabled) {
                return
            }
            var snap = this.options.snap,
                newX = snap ? this.currentPage.pageX : this.x,
                newY = snap ? this.currentPage.pageY : this.y,
                now = utils.getTime(),
                prevTime = this.keyTime || 0,
                acceleration = 0.25,
                pos;
            if (this.options.useTransition && this.isInTransition) {
                    pos = this.getComputedPosition();
                    this._translate(Math.round(pos.x), Math.round(pos.y));
                    this.isInTransition = false
                }
            this.keyAcceleration = now - prevTime < 200 ? Math.min(this.keyAcceleration + acceleration, 50) : 0;
            switch (e.keyCode) {
                case this.options.keyBindings.pageUp:
                    if (this.hasHorizontalScroll && !this.hasVerticalScroll) {
                        newX += snap ? 1 : this.wrapperWidth
                    } else {
                        newY += snap ? 1 : this.wrapperHeight
                    }
                    break;
                case this.options.keyBindings.pageDown:
                    if (this.hasHorizontalScroll && !this.hasVerticalScroll) {
                        newX -= snap ? 1 : this.wrapperWidth
                    } else {
                        newY -= snap ? 1 : this.wrapperHeight
                    }
                    break;
                case this.options.keyBindings.end:
                    newX = snap ? this.pages.length - 1 : this.maxScrollX;
                    newY = snap ? this.pages[0].length - 1 : this.maxScrollY;
                    break;
                case this.options.keyBindings.home:
                    newX = 0;
                    newY = 0;
                    break;
                case this.options.keyBindings.left:
                    newX += snap ? -1 : 5 + this.keyAcceleration >> 0;
                    break;
                case this.options.keyBindings.up:
                    newY += snap ? 1 : 5 + this.keyAcceleration >> 0;
                    break;
                case this.options.keyBindings.right:
                    newX -= snap ? -1 : 5 + this.keyAcceleration >> 0;
                    break;
                case this.options.keyBindings.down:
                    newY -= snap ? 1 : 5 + this.keyAcceleration >> 0;
                    break;
                default:
                    return
                }
            if (snap) {
                    this.goToPage(newX, newY);
                    return
                }
            if (newX > 0) {
                    newX = 0;
                    this.keyAcceleration = 0
                } else {
                    if (newX < this.maxScrollX) {
                        newX = this.maxScrollX;
                        this.keyAcceleration = 0
                    }
                }
            if (newY > 0) {
                    newY = 0;
                    this.keyAcceleration = 0
                } else {
                    if (newY < this.maxScrollY) {
                        newY = this.maxScrollY;
                        this.keyAcceleration = 0
                    }
                }
            this.scrollTo(newX, newY, 0);
            this.keyTime = now
        },
        _animate: function (destX, destY, duration, easingFn) {
            var that = this,
                startX = this.x,
                startY = this.y,
                startTime = utils.getTime(),
                destTime = startTime + duration;

            function step() {
                    var now = utils.getTime(),
                        newX, newY, easing;
                    if (now >= destTime) {
                            that.isAnimating = false;
                            that._translate(destX, destY);
                            if (!that.resetPosition(that.options.bounceTime)) {
                                that._execEvent("scrollEnd")
                            }
                            return
                        }
                    now = (now - startTime) / duration;
                    easing = easingFn(now);
                    newX = (destX - startX) * easing + startX;
                    newY = (destY - startY) * easing + startY;
                    that._translate(newX, newY);
                    if (that.isAnimating) {
                            rAF(step)
                        }
                    if (that.options.probeType == 3) {
                            that._execEvent("scroll")
                        }
                }
            this.isAnimating = true;
            step()
        },
        handleEvent: function (e) {
            switch (e.type) {
            case "touchstart":
            case "pointerdown":
            case "MSPointerDown":
            case "mousedown":
                this._start(e);
                break;
            case "touchmove":
            case "pointermove":
            case "MSPointerMove":
            case "mousemove":
                this._move(e);
                break;
            case "touchend":
            case "pointerup":
            case "MSPointerUp":
            case "mouseup":
            case "touchcancel":
            case "pointercancel":
            case "MSPointerCancel":
            case "mousecancel":
                this._end(e);
                break;
            case "orientationchange":
            case "resize":
                this._resize();
                break;
            case "transitionend":
            case "webkitTransitionEnd":
            case "oTransitionEnd":
            case "MSTransitionEnd":
                this._transitionEnd(e);
                break;
            case "wheel":
            case "DOMMouseScroll":
            case "mousewheel":
                this._wheel(e);
                break;
            case "keydown":
                this._key(e);
                break;
            case "click":
                if (!e._constructed) {
                    e.preventDefault();
                    e.stopPropagation()
                }
                break
            }
        }
    };

    function createDefaultScrollbar(direction, interactive, type) {
        var scrollbar = document.createElement("div"),
            indicator = document.createElement("div");
        if (type === true) {
                scrollbar.style.cssText = "position:absolute;z-index:9999";
                indicator.style.cssText = "-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;background:rgba(255,190,50,0.9);border:1px solid rgba(255,255,255,0.9);border-radius:3px"
            }
        indicator.className = "iScrollIndicator";
        if (direction == "h") {
                if (type === true) {
                    scrollbar.style.cssText += ";height:7px;left:2px;right:2px;bottom:0";
                    indicator.style.height = "100%"
                }
                scrollbar.className = "iScrollHorizontalScrollbar"
            } else {
                if (type === true) {
                    scrollbar.style.cssText += ";width:4px;bottom:2px;top:2px;right:1px";
                    indicator.style.width = "100%"
                }
                scrollbar.className = "iScrollVerticalScrollbar"
            }
        scrollbar.style.cssText += ";overflow:hidden";
        if (!interactive) {
                scrollbar.style.pointerEvents = "none"
            }
        scrollbar.appendChild(indicator);
        return scrollbar
    }
    function Indicator(scroller, options) {
        this.wrapper = typeof options.el == "string" ? document.querySelector(options.el) : options.el;
        this.wrapperStyle = this.wrapper.style;
        this.indicator = this.wrapper.children[0];
        this.indicatorStyle = this.indicator.style;
        this.scroller = scroller;
        this.options = {
            listenX: true,
            listenY: true,
            interactive: false,
            resize: true,
            defaultScrollbars: false,
            shrink: false,
            fade: false,
            speedRatioX: 0,
            speedRatioY: 0
        };
        for (var i in options) {
            this.options[i] = options[i]
        }
        this.sizeRatioX = 1;
        this.sizeRatioY = 1;
        this.maxPosX = 0;
        this.maxPosY = 0;
        if (this.options.interactive) {
            if (!this.options.disableTouch) {
                utils.addEvent(this.indicator, "touchstart", this);
                utils.addEvent(window, "touchend", this)
            }
            if (!this.options.disablePointer) {
                utils.addEvent(this.indicator, utils.prefixPointerEvent("pointerdown"), this);
                utils.addEvent(window, utils.prefixPointerEvent("pointerup"), this)
            }
            if (!this.options.disableMouse) {
                utils.addEvent(this.indicator, "mousedown", this);
                utils.addEvent(window, "mouseup", this)
            }
        }
        if (this.options.fade) {
            this.wrapperStyle[utils.style.transform] = this.scroller.translateZ;
            this.wrapperStyle[utils.style.transitionDuration] = utils.isBadAndroid ? "0.001s" : "0ms";
            this.wrapperStyle.opacity = "0"
        }
    }
    Indicator.prototype = {
        handleEvent: function (e) {
            switch (e.type) {
            case "touchstart":
            case "pointerdown":
            case "MSPointerDown":
            case "mousedown":
                this._start(e);
                break;
            case "touchmove":
            case "pointermove":
            case "MSPointerMove":
            case "mousemove":
                this._move(e);
                break;
            case "touchend":
            case "pointerup":
            case "MSPointerUp":
            case "mouseup":
            case "touchcancel":
            case "pointercancel":
            case "MSPointerCancel":
            case "mousecancel":
                this._end(e);
                break
            }
        },
        destroy: function () {
            if (this.options.interactive) {
                utils.removeEvent(this.indicator, "touchstart", this);
                utils.removeEvent(this.indicator, utils.prefixPointerEvent("pointerdown"), this);
                utils.removeEvent(this.indicator, "mousedown", this);
                utils.removeEvent(window, "touchmove", this);
                utils.removeEvent(window, utils.prefixPointerEvent("pointermove"), this);
                utils.removeEvent(window, "mousemove", this);
                utils.removeEvent(window, "touchend", this);
                utils.removeEvent(window, utils.prefixPointerEvent("pointerup"), this);
                utils.removeEvent(window, "mouseup", this)
            }
            if (this.options.defaultScrollbars) {
                this.wrapper.parentNode.removeChild(this.wrapper)
            }
        },
        _start: function (e) {
            var point = e.touches ? e.touches[0] : e;
            e.preventDefault();
            e.stopPropagation();
            this.transitionTime();
            this.initiated = true;
            this.moved = false;
            this.lastPointX = point.pageX;
            this.lastPointY = point.pageY;
            this.startTime = utils.getTime();
            if (!this.options.disableTouch) {
                utils.addEvent(window, "touchmove", this)
            }
            if (!this.options.disablePointer) {
                utils.addEvent(window, utils.prefixPointerEvent("pointermove"), this)
            }
            if (!this.options.disableMouse) {
                utils.addEvent(window, "mousemove", this)
            }
            this.scroller._execEvent("beforeScrollStart")
        },
        _move: function (e) {
            var point = e.touches ? e.touches[0] : e,
                deltaX, deltaY, newX, newY, timestamp = utils.getTime();
            if (!this.moved) {
                    this.scroller._execEvent("scrollStart")
                }
            this.moved = true;
            deltaX = point.pageX - this.lastPointX;
            this.lastPointX = point.pageX;
            deltaY = point.pageY - this.lastPointY;
            this.lastPointY = point.pageY;
            newX = this.x + deltaX;
            newY = this.y + deltaY;
            this._pos(newX, newY);
            if (this.scroller.options.probeType == 1 && timestamp - this.startTime > 300) {
                    this.startTime = timestamp;
                    this.scroller._execEvent("scroll")
                } else {
                    if (this.scroller.options.probeType > 1) {
                        this.scroller._execEvent("scroll")
                    }
                }
            e.preventDefault();
            e.stopPropagation()
        },
        _end: function (e) {
            if (!this.initiated) {
                return
            }
            this.initiated = false;
            e.preventDefault();
            e.stopPropagation();
            utils.removeEvent(window, "touchmove", this);
            utils.removeEvent(window, utils.prefixPointerEvent("pointermove"), this);
            utils.removeEvent(window, "mousemove", this);
            if (this.scroller.options.snap) {
                var snap = this.scroller._nearestSnap(this.scroller.x, this.scroller.y);
                var time = this.options.snapSpeed || Math.max(Math.max(Math.min(Math.abs(this.scroller.x - snap.x), 1000), Math.min(Math.abs(this.scroller.y - snap.y), 1000)), 300);
                if (this.scroller.x != snap.x || this.scroller.y != snap.y) {
                    this.scroller.directionX = 0;
                    this.scroller.directionY = 0;
                    this.scroller.currentPage = snap;
                    this.scroller.scrollTo(snap.x, snap.y, time, this.scroller.options.bounceEasing)
                }
            }
            if (this.moved) {
                this.scroller._execEvent("scrollEnd")
            }
        },
        transitionTime: function (time) {
            time = time || 0;
            this.indicatorStyle[utils.style.transitionDuration] = time + "ms";
            if (!time && utils.isBadAndroid) {
                this.indicatorStyle[utils.style.transitionDuration] = "0.001s"
            }
        },
        transitionTimingFunction: function (easing) {
            this.indicatorStyle[utils.style.transitionTimingFunction] = easing
        },
        refresh: function () {
            this.transitionTime();
            if (this.options.listenX && !this.options.listenY) {
                this.indicatorStyle.display = this.scroller.hasHorizontalScroll ? "block" : "none"
            } else {
                if (this.options.listenY && !this.options.listenX) {
                    this.indicatorStyle.display = this.scroller.hasVerticalScroll ? "block" : "none"
                } else {
                    this.indicatorStyle.display = this.scroller.hasHorizontalScroll || this.scroller.hasVerticalScroll ? "block" : "none"
                }
            }
            if (this.scroller.hasHorizontalScroll && this.scroller.hasVerticalScroll) {
                utils.addClass(this.wrapper, "iScrollBothScrollbars");
                utils.removeClass(this.wrapper, "iScrollLoneScrollbar");
                if (this.options.defaultScrollbars && this.options.customStyle) {
                    if (this.options.listenX) {
                        this.wrapper.style.right = "8px"
                    } else {
                        this.wrapper.style.bottom = "8px"
                    }
                }
            } else {
                utils.removeClass(this.wrapper, "iScrollBothScrollbars");
                utils.addClass(this.wrapper, "iScrollLoneScrollbar");
                if (this.options.defaultScrollbars && this.options.customStyle) {
                    if (this.options.listenX) {
                        this.wrapper.style.right = "2px"
                    } else {
                        this.wrapper.style.bottom = "2px"
                    }
                }
            }
            var r = this.wrapper.offsetHeight;
            if (this.options.listenX) {
                this.wrapperWidth = this.wrapper.clientWidth;
                if (this.options.resize) {
                    this.indicatorWidth = Math.max(Math.round(this.wrapperWidth * this.wrapperWidth / (this.scroller.scrollerWidth || this.wrapperWidth || 1)), 8);
                    this.indicatorStyle.width = this.indicatorWidth + "px"
                } else {
                    this.indicatorWidth = this.indicator.clientWidth
                }
                this.maxPosX = this.wrapperWidth - this.indicatorWidth;
                if (this.options.shrink == "clip") {
                    this.minBoundaryX = -this.indicatorWidth + 8;
                    this.maxBoundaryX = this.wrapperWidth - 8
                } else {
                    this.minBoundaryX = 0;
                    this.maxBoundaryX = this.maxPosX
                }
                this.sizeRatioX = this.options.speedRatioX || (this.scroller.maxScrollX && (this.maxPosX / this.scroller.maxScrollX))
            }
            if (this.options.listenY) {
                this.wrapperHeight = this.wrapper.clientHeight;
                if (this.options.resize) {
                    this.indicatorHeight = Math.max(Math.round(this.wrapperHeight * this.wrapperHeight / (this.scroller.scrollerHeight || this.wrapperHeight || 1)), 8);
                    this.indicatorStyle.height = this.indicatorHeight + "px"
                } else {
                    this.indicatorHeight = this.indicator.clientHeight
                }
                this.maxPosY = this.wrapperHeight - this.indicatorHeight;
                if (this.options.shrink == "clip") {
                    this.minBoundaryY = -this.indicatorHeight + 8;
                    this.maxBoundaryY = this.wrapperHeight - 8
                } else {
                    this.minBoundaryY = 0;
                    this.maxBoundaryY = this.maxPosY
                }
                this.maxPosY = this.wrapperHeight - this.indicatorHeight;
                this.sizeRatioY = this.options.speedRatioY || (this.scroller.maxScrollY && (this.maxPosY / this.scroller.maxScrollY))
            }
            this.updatePosition()
        },
        updatePosition: function () {
            var x = this.options.listenX && Math.round(this.sizeRatioX * this.scroller.x) || 0,
                y = this.options.listenY && Math.round(this.sizeRatioY * this.scroller.y) || 0;
            if (!this.options.ignoreBoundaries) {
                    if (x < this.minBoundaryX) {
                        if (this.options.shrink == "scale") {
                            this.width = Math.max(this.indicatorWidth + x, 8);
                            this.indicatorStyle.width = this.width + "px"
                        }
                        x = this.minBoundaryX
                    } else {
                        if (x > this.maxBoundaryX) {
                            if (this.options.shrink == "scale") {
                                this.width = Math.max(this.indicatorWidth - (x - this.maxPosX), 8);
                                this.indicatorStyle.width = this.width + "px";
                                x = this.maxPosX + this.indicatorWidth - this.width
                            } else {
                                x = this.maxBoundaryX
                            }
                        } else {
                            if (this.options.shrink == "scale" && this.width != this.indicatorWidth) {
                                this.width = this.indicatorWidth;
                                this.indicatorStyle.width = this.width + "px"
                            }
                        }
                    }
                    if (y < this.minBoundaryY) {
                        if (this.options.shrink == "scale") {
                            this.height = Math.max(this.indicatorHeight + y * 3, 8);
                            this.indicatorStyle.height = this.height + "px"
                        }
                        y = this.minBoundaryY
                    } else {
                        if (y > this.maxBoundaryY) {
                            if (this.options.shrink == "scale") {
                                this.height = Math.max(this.indicatorHeight - (y - this.maxPosY) * 3, 8);
                                this.indicatorStyle.height = this.height + "px";
                                y = this.maxPosY + this.indicatorHeight - this.height
                            } else {
                                y = this.maxBoundaryY
                            }
                        } else {
                            if (this.options.shrink == "scale" && this.height != this.indicatorHeight) {
                                this.height = this.indicatorHeight;
                                this.indicatorStyle.height = this.height + "px"
                            }
                        }
                    }
                }
            this.x = x;
            this.y = y;
            if (this.scroller.options.useTransform) {
                    this.indicatorStyle[utils.style.transform] = "translate(" + x + "px," + y + "px)" + this.scroller.translateZ
                } else {
                    this.indicatorStyle.left = x + "px";
                    this.indicatorStyle.top = y + "px"
                }
        },
        _pos: function (x, y) {
            if (x < 0) {
                x = 0
            } else {
                if (x > this.maxPosX) {
                    x = this.maxPosX
                }
            }
            if (y < 0) {
                y = 0
            } else {
                if (y > this.maxPosY) {
                    y = this.maxPosY
                }
            }
            x = this.options.listenX ? Math.round(x / this.sizeRatioX) : this.scroller.x;
            y = this.options.listenY ? Math.round(y / this.sizeRatioY) : this.scroller.y;
            this.scroller.scrollTo(x, y)
        },
        fade: function (val, hold) {
            if (hold && !this.visible) {
                return
            }
            clearTimeout(this.fadeTimeout);
            this.fadeTimeout = null;
            var time = val ? 250 : 500,
                delay = val ? 0 : 300;
            val = val ? "1" : "0";
            this.wrapperStyle[utils.style.transitionDuration] = time + "ms";
            this.fadeTimeout = setTimeout((function (val) {
                    this.wrapperStyle.opacity = val;
                    this.visible = +val
                }).bind(this, val), delay)
        }
    };
    IScroll.utils = utils;
    if (typeof module != "undefined" && module.exports) {
        module.exports = IScroll
    } else {
        window.IScroll = IScroll
    }
})(window, document, Math);


/* audio.min.js */
(function (audiojs, audiojsInstance, container) {
    var path = (function () {
        var re = new RegExp("audio(.min)?.js.*"),
            scripts = document.getElementsByTagName("script");
        for (var i = 0, ii = scripts.length; i < ii; i++) {
                var path = scripts[i].getAttribute("src");
                if (re.test(path)) {
                    return path.replace(re, "")
                }
            }
    })();
    container[audiojs] = {
        instanceCount: 0,
        instances: {},
        flashSource: '      <object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" id="$1" width="1" height="1" name="$1" style="position: absolute; left: -1px;">         <param name="movie" value="$2?playerInstance=' + audiojs + '.instances[\'$1\']&datetime=$3">         <param name="allowscriptaccess" value="always">         <embed name="$1" src="$2?playerInstance=' + audiojs + '.instances[\'$1\']&datetime=$3" width="1" height="1" allowscriptaccess="always">       </object>',
        settings: {
            autoplay: false,
            loop: false,
            preload: true,
            imageLocation: path + "player-graphics.gif",
            swfLocation: path + "audiojs.swf",
            useFlash: (function () {
                var a = document.createElement("audio");
                return !(a.canPlayType && a.canPlayType("audio/mpeg;").replace(/no/, ""))
            })(),
            hasFlash: (function () {
                if (navigator.plugins && navigator.plugins.length && navigator.plugins["Shockwave Flash"]) {
                    return true
                } else {
                    if (navigator.mimeTypes && navigator.mimeTypes.length) {
                        var mimeType = navigator.mimeTypes["application/x-shockwave-flash"];
                        return mimeType && mimeType.enabledPlugin
                    } else {
                        try {
                            var ax = new ActiveXObject("ShockwaveFlash.ShockwaveFlash");
                            return true
                        } catch (e) {}
                    }
                }
                return false
            })(),
            createPlayer: {
                markup: '          <div class="play-pause">             <p class="play"></p>             <p class="pause"></p>             <p class="loading"></p>             <p class="error"></p>           </div>           <div class="time">             <em class="played">00:00</em>/<strong class="duration">00:00</strong>           </div>           <div class="scrubber">             <div class="progress"></div>             <div class="loaded"></div>           </div>           <div class="error-message"></div>',
                playPauseClass: "play-pause",
                scrubberClass: "scrubber",
                progressClass: "progress",
                loaderClass: "loaded",
                timeClass: "time",
                durationClass: "duration",
                playedClass: "played",
                errorMessageClass: "error-message",
                playingClass: "playing",
                loadingClass: "loading",
                errorClass: "error"
            },
            css: '        .audiojs audio { position: absolute; left: -1px; }         .audiojs { width: 460px; height: 36px; background: #404040; overflow: hidden; font-family: monospace; font-size: 12px;           background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, #444), color-stop(0.5, #555), color-stop(0.51, #444), color-stop(1, #444));           background-image: -moz-linear-gradient(center top, #444 0%, #555 50%, #444 51%, #444 100%);           -webkit-box-shadow: 1px 1px 8px rgba(0, 0, 0, 0.3); -moz-box-shadow: 1px 1px 8px rgba(0, 0, 0, 0.3);           -o-box-shadow: 1px 1px 8px rgba(0, 0, 0, 0.3); box-shadow: 1px 1px 8px rgba(0, 0, 0, 0.3); }         .audiojs .play-pause { width: 25px; height: 40px; padding: 4px 6px; margin: 0px; float: left; overflow: hidden; border-right: 1px solid #000; }         .audiojs p { display: none; width: 25px; height: 40px; margin: 0px; cursor: pointer; }         .audiojs .play { display: block; }         .audiojs .scrubber { position: relative; float: left; width: 280px; background: #5a5a5a; height: 14px; margin: 10px; border-top: 1px solid #3f3f3f; border-left: 0px; border-bottom: 0px; overflow: hidden; }         .audiojs .progress { position: absolute; top: 0px; left: 0px; height: 14px; width: 0px; background: #ccc; z-index: 1;           background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, #ccc), color-stop(0.5, #ddd), color-stop(0.51, #ccc), color-stop(1, #ccc));           background-image: -moz-linear-gradient(center top, #ccc 0%, #ddd 50%, #ccc 51%, #ccc 100%); }         .audiojs .loaded { position: absolute; top: 0px; left: 0px; height: 14px; width: 0px; background: #000;           background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, #222), color-stop(0.5, #333), color-stop(0.51, #222), color-stop(1, #222));           background-image: -moz-linear-gradient(center top, #222 0%, #333 50%, #222 51%, #222 100%); }         .audiojs .time { float: left; height: 36px; line-height: 36px; margin: 0px 0px 0px 6px; padding: 0px 6px 0px 12px; border-left: 1px solid #000; color: #ddd; text-shadow: 1px 1px 0px rgba(0, 0, 0, 0.5); }         .audiojs .time em { padding: 0px 2px 0px 0px; color: #f9f9f9; font-style: normal; }         .audiojs .time strong { padding: 0px 0px 0px 2px; font-weight: normal; }         .audiojs .error-message { float: left; display: none; margin: 0px 10px; height: 36px; width: 400px; overflow: hidden; line-height: 36px; white-space: nowrap; color: #fff;           text-overflow: ellipsis; -o-text-overflow: ellipsis; -icab-text-overflow: ellipsis; -khtml-text-overflow: ellipsis; -moz-text-overflow: ellipsis; -webkit-text-overflow: ellipsis; }         .audiojs .error-message a { color: #eee; text-decoration: none; padding-bottom: 1px; border-bottom: 1px solid #999; white-space: wrap; }                 .audiojs .play { background: url("$1") -2px -1px no-repeat; }         .audiojs .loading { background: url("$1") -2px -31px no-repeat; }         .audiojs .error { background: url("$1") -2px -61px no-repeat; }         .audiojs .pause { background: url("$1") -2px -91px no-repeat; }                 .playing .play, .playing .loading, .playing .error { display: none; }         .playing .pause { display: block; }                 .loading .play, .loading .pause, .loading .error { display: none; }         .loading .loading { display: block; }                 .error .time, .error .play, .error .pause, .error .scrubber, .error .loading { display: none; }         .error .error { display: block; }         .error .play-pause p { cursor: auto; }         .error .error-message { display: block; }',
            trackEnded: function (e) {},
            flashError: function () {
                var player = this.settings.createPlayer,
                    errorMessage = getByClass(player.errorMessageClass, this.wrapper),
                    html = 'Missing <a href="http://get.adobe.com/flashplayer/">flash player</a> plugin.';
                if (this.mp3) {
                        html += ' <a href="' + this.mp3 + '">Download audio file</a>.'
                    }
                container[audiojs].helpers.removeClass(this.wrapper, player.loadingClass);
                container[audiojs].helpers.addClass(this.wrapper, player.errorClass);
                errorMessage.innerHTML = html
            },
            loadError: function (e) {
                var player = this.settings.createPlayer,
                    errorMessage = getByClass(player.errorMessageClass, this.wrapper);
                container[audiojs].helpers.removeClass(this.wrapper, player.loadingClass);
                container[audiojs].helpers.addClass(this.wrapper, player.errorClass);
                errorMessage.innerHTML = 'Error loading: "' + this.mp3 + '"'
            },
            init: function () {
                var player = this.settings.createPlayer;
                container[audiojs].helpers.addClass(this.wrapper, player.loadingClass)
            },
            loadStarted: function () {
                var player = this.settings.createPlayer,
                    duration = getByClass(player.durationClass, this.wrapper),
                    m = Math.floor(this.duration / 60),
                    s = Math.floor(this.duration % 60);
                container[audiojs].helpers.removeClass(this.wrapper, player.loadingClass);
                duration.innerHTML = ((m < 10 ? "0" : "") + m + ":" + (s < 10 ? "0" : "") + s)
            },
            loadProgress: function (percent) {
                var player = this.settings.createPlayer,
                    scrubber = getByClass(player.scrubberClass, this.wrapper),
                    loaded = getByClass(player.loaderClass, this.wrapper);
                loaded.style.width = (scrubber.offsetWidth * percent) + "px"
            },
            playPause: function () {
                if (this.playing) {
                    this.settings.play()
                } else {
                    this.settings.pause()
                }
            },
            play: function () {
                var player = this.settings.createPlayer;
                container[audiojs].helpers.addClass(this.wrapper, player.playingClass)
            },
            pause: function () {
                var player = this.settings.createPlayer;
                container[audiojs].helpers.removeClass(this.wrapper, player.playingClass)
            },
            updatePlayhead: function (percent) {
                var player = this.settings.createPlayer,
                    scrubber = getByClass(player.scrubberClass, this.wrapper),
                    progress = getByClass(player.progressClass, this.wrapper);
                progress.style.width = (scrubber.offsetWidth * percent) + "px";
                var played = getByClass(player.playedClass, this.wrapper),
                    p = this.duration * percent,
                    m = Math.floor(p / 60),
                    s = Math.floor(p % 60);
                played.innerHTML = ((m < 10 ? "0" : "") + m + ":" + (s < 10 ? "0" : "") + s)
            }
        },
        create: function (element, options) {
            var options = options || {};
            if (element.length) {
                return this.createAll(options, element)
            } else {
                return this.newInstance(element, options)
            }
        },
        createAll: function (options, elements) {
            var audioElements = elements || document.getElementsByTagName("audio"),
                instances = [];
            options = options || {};
            for (var i = 0, ii = audioElements.length; i < ii; i++) {
                    instances.push(this.newInstance(audioElements[i], options))
                }
            return instances
        },
        newInstance: function (element, options) {
            var element = element,
                s = this.helpers.clone(this.settings),
                id = "audiojs" + this.instanceCount,
                wrapperId = "audiojs_wrapper" + this.instanceCount,
                instanceCount = this.instanceCount++;
            if (element.getAttribute("autoplay") != null) {
                    s.autoplay = true
                }
            if (element.getAttribute("loop") != null) {
                    s.loop = true
                }
            if (element.getAttribute("preload") == "none") {
                    s.preload = false
                }
            if (options) {
                    this.helpers.merge(s, options)
                }
            if (s.createPlayer.markup) {
                    element = this.createPlayer(element, s.createPlayer, wrapperId)
                } else {
                    element.parentNode.setAttribute("id", wrapperId)
                }
            var audio = new container[audiojsInstance](element, s);
            if (s.css) {
                    this.helpers.injectCss(audio, s.css)
                }
            if (s.useFlash && s.hasFlash) {
                    this.injectFlash(audio, id);
                    this.attachFlashEvents(audio.wrapper, audio)
                } else {
                    if (s.useFlash && !s.hasFlash) {
                        this.settings.flashError.apply(audio)
                    }
                }
            if (!s.useFlash || (s.useFlash && s.hasFlash)) {
                    this.attachEvents(audio.wrapper, audio)
                }
            this.instances[id] = audio;
            return audio
        },
        createPlayer: function (element, player, id) {
            var wrapper = document.createElement("div"),
                newElement = element.cloneNode(true);
            wrapper.setAttribute("class", "audiojs");
            wrapper.setAttribute("className", "audiojs");
            wrapper.setAttribute("id", id);
            if (newElement.outerHTML && !document.createElement("audio").canPlayType) {
                    newElement = this.helpers.cloneHtml5Node(element);
                    wrapper.innerHTML = player.markup;
                    wrapper.appendChild(newElement);
                    element.outerHTML = wrapper.outerHTML;
                    wrapper = document.getElementById(id)
                } else {
                    wrapper.appendChild(newElement);
                    wrapper.innerHTML = wrapper.innerHTML + player.markup;
                    element.parentNode.replaceChild(wrapper, element)
                }
            return wrapper.getElementsByTagName("audio")[0]
        },
        attachEvents: function (wrapper, audio) {
            if (!audio.settings.createPlayer) {
                return
            }
            var player = audio.settings.createPlayer,
                playPause = getByClass(player.playPauseClass, wrapper),
                scrubber = getByClass(player.scrubberClass, wrapper),
                leftPos = function (elem) {
                    var curleft = 0;
                    if (elem.offsetParent) {
                        do {
                            curleft += elem.offsetLeft
                        } while (elem = elem.offsetParent)
                    }
                    return curleft
                };
            container[audiojs].events.addListener(playPause, "tap", function (e) {
                    audio.playPause.apply(audio)
                });
            container[audiojs].events.addListener(scrubber, "tap", function (e) {
                    var relativeLeft = e.clientX - leftPos(this);
                    audio.skipTo(relativeLeft / scrubber.offsetWidth)
                });
            if (audio.settings.useFlash) {
                    return
                }
            container[audiojs].events.trackLoadProgress(audio);
            container[audiojs].events.addListener(audio.element, "timeupdate", function (e) {
                    audio.updatePlayhead.apply(audio)
                });
            container[audiojs].events.addListener(audio.element, "ended", function (e) {
                    audio.trackEnded.apply(audio)
                });
            container[audiojs].events.addListener(audio.source, "error", function (e) {
                    clearInterval(audio.readyTimer);
                    clearInterval(audio.loadTimer);
                    audio.settings.loadError.apply(audio)
                })
        },
        attachFlashEvents: function (element, audio) {
            audio["swfReady"] = false;
            audio["load"] = function (mp3) {
                audio.mp3 = mp3;
                if (audio.swfReady) {
                    audio.element.load(mp3)
                }
            };
            audio["loadProgress"] = function (percent, duration) {
                audio.loadedPercent = percent;
                audio.duration = duration;
                audio.settings.loadStarted.apply(audio);
                audio.settings.loadProgress.apply(audio, [percent])
            };
            audio["skipTo"] = function (percent) {
                if (percent > audio.loadedPercent) {
                    return
                }
                audio.updatePlayhead.call(audio, [percent]);
                audio.element.skipTo(percent)
            };
            audio["updatePlayhead"] = function (percent) {
                audio.settings.updatePlayhead.apply(audio, [percent])
            };
            audio["play"] = function () {
                if (!audio.settings.preload) {
                    audio.settings.preload = true;
                    audio.element.init(audio.mp3)
                }
                audio.playing = true;
                audio.element.pplay();
                audio.settings.play.apply(audio)
            };
            audio["pause"] = function () {
                audio.playing = false;
                audio.element.ppause();
                audio.settings.pause.apply(audio)
            };
            audio["setVolume"] = function (v) {
                audio.element.setVolume(v)
            };
            audio["loadStarted"] = function () {
                audio.swfReady = true;
                if (audio.settings.preload) {
                    audio.element.init(audio.mp3)
                }
                if (audio.settings.autoplay) {
                    audio.play.apply(audio)
                }
            }
        },
        injectFlash: function (audio, id) {
            var flashSource = this.flashSource.replace(/\$1/g, id);
            flashSource = flashSource.replace(/\$2/g, audio.settings.swfLocation);
            flashSource = flashSource.replace(/\$3/g, (+new Date + Math.random()));
            var html = audio.wrapper.innerHTML,
                div = document.createElement("div");
            div.innerHTML = flashSource + html;
            audio.wrapper.innerHTML = div.innerHTML;
            audio.element = this.helpers.getSwf(id)
        },
        helpers: {
            merge: function (obj1, obj2) {
                for (attr in obj2) {
                    if (obj1.hasOwnProperty(attr) || obj2.hasOwnProperty(attr)) {
                        obj1[attr] = obj2[attr]
                    }
                }
            },
            clone: function (obj) {
                if (obj == null || typeof(obj) !== "object") {
                    return obj
                }
                var temp = new obj.constructor();
                for (var key in obj) {
                    temp[key] = arguments.callee(obj[key])
                }
                return temp
            },
            addClass: function (element, className) {
                var re = new RegExp("(\\s|^)" + className + "(\\s|$)");
                if (re.test(element.className)) {
                    return
                }
                element.className += " " + className
            },
            removeClass: function (element, className) {
                var re = new RegExp("(\\s|^)" + className + "(\\s|$)");
                element.className = element.className.replace(re, " ")
            },
            injectCss: function (audio, string) {
                var prepend = "",
                    styles = document.getElementsByTagName("style"),
                    css = string.replace(/\$1/g, audio.settings.imageLocation);
                for (var i = 0, ii = styles.length; i < ii; i++) {
                        var title = styles[i].getAttribute("title");
                        if (title && ~title.indexOf("audiojs")) {
                            style = styles[i];
                            if (style.innerHTML === css) {
                                return
                            }
                            prepend = style.innerHTML;
                            break
                        }
                    }
                var head = document.getElementsByTagName("head")[0],
                    firstchild = head.firstChild,
                    style = document.createElement("style");
                if (!head) {
                        return
                    }
                style.setAttribute("type", "text/css");
                style.setAttribute("title", "audiojs");
                if (style.styleSheet) {
                        style.styleSheet.cssText = prepend + css
                    } else {
                        style.appendChild(document.createTextNode(prepend + css))
                    }
                if (firstchild) {
                        head.insertBefore(style, firstchild)
                    } else {
                        head.appendChild(styleElement)
                    }
            },
            cloneHtml5Node: function (audioTag) {
                var fragment = document.createDocumentFragment(),
                    doc = fragment.createElement ? fragment : document;
                doc.createElement("audio");
                var div = doc.createElement("div");
                fragment.appendChild(div);
                div.innerHTML = audioTag.outerHTML;
                return div.firstChild
            },
            getSwf: function (name) {
                var swf = document[name] || window[name];
                return swf.length > 1 ? swf[swf.length - 1] : swf
            }
        },
        events: {
            memoryLeaking: false,
            listeners: [],
            addListener: function (element, eventName, func) {
                if (element.addEventListener) {
                    element.addEventListener(eventName, func, false)
                } else {
                    if (element.attachEvent) {
                        this.listeners.push(element);
                        if (!this.memoryLeaking) {
                            window.attachEvent("onunload", function () {
                                if (this.listeners) {
                                    for (var i = 0, ii = this.listeners.length; i < ii; i++) {
                                        container[audiojs].events.purge(this.listeners[i])
                                    }
                                }
                            });
                            this.memoryLeaking = true
                        }
                        element.attachEvent("on" + eventName, function () {
                            func.call(element, window.event)
                        })
                    }
                }
            },
            trackLoadProgress: function (audio) {
                if (!audio.settings.preload) {
                    return
                }
                var readyTimer, loadTimer, audio = audio,
                    ios = (/(ipod|iphone|ipad)/i).test(navigator.userAgent);
                readyTimer = setInterval(function () {
                        if (audio.element.readyState > -1) {
                            if (!ios) {
                                audio.init.apply(audio)
                            }
                        }
                        if (audio.element.readyState > 1) {
                            if (audio.settings.autoplay) {
                                audio.play.apply(audio)
                            }
                            clearInterval(readyTimer);
                            loadTimer = setInterval(function () {
                                audio.loadProgress.apply(audio);
                                if (audio.loadedPercent >= 1) {
                                    clearInterval(loadTimer)
                                }
                            })
                        }
                    }, 10);
                audio.readyTimer = readyTimer;
                audio.loadTimer = loadTimer
            },
            purge: function (d) {
                var a = d.attributes,
                    i;
                if (a) {
                        for (i = 0; i < a.length; i += 1) {
                            if (typeof d[a[i].name] === "function") {
                                d[a[i].name] = null
                            }
                        }
                    }
                a = d.childNodes;
                if (a) {
                        for (i = 0; i < a.length; i += 1) {
                            purge(d.childNodes[i])
                        }
                    }
            },
            ready: (function () {
                return function (fn) {
                    var win = window,
                        done = false,
                        top = true,
                        doc = win.document,
                        root = doc.documentElement,
                        add = doc.addEventListener ? "addEventListener" : "attachEvent",
                        rem = doc.addEventListener ? "removeEventListener" : "detachEvent",
                        pre = doc.addEventListener ? "" : "on",
                        init = function (e) {
                            if (e.type == "readystatechange" && doc.readyState != "complete") {
                                return
                            }(e.type == "load" ? win : doc)[rem](pre + e.type, init, false);
                            if (!done && (done = true)) {
                                fn.call(win, e.type || e)
                            }
                        },
                        poll = function () {
                            try {
                                root.doScroll("left")
                            } catch (e) {
                                setTimeout(poll, 50);
                                return
                            }
                            init("poll")
                        };
                    if (doc.readyState == "complete") {
                            fn.call(win, "lazy")
                        } else {
                            if (doc.createEventObject && root.doScroll) {
                                try {
                                    top = !win.frameElement
                                } catch (e) {}
                                if (top) {
                                    poll()
                                }
                            }
                            doc[add](pre + "DOMContentLoaded", init, false);
                            doc[add](pre + "readystatechange", init, false);
                            win[add](pre + "load", init, false)
                        }
                }
            })()
        }
    };
    container[audiojsInstance] = function (element, settings) {
        this.element = element;
        this.wrapper = element.parentNode;
        this.source = element.getElementsByTagName("source")[0] || element;
        this.mp3 = (function (element) {
            var source = element.getElementsByTagName("source")[0];
            return element.getAttribute("src") || (source ? source.getAttribute("src") : null)
        })(element);
        this.settings = settings;
        this.loadStartedCalled = false;
        this.loadedPercent = 0;
        this.duration = 1;
        this.playing = false
    };
    container[audiojsInstance].prototype = {
        updatePlayhead: function () {
            var percent = this.element.currentTime / this.duration;
            this.settings.updatePlayhead.apply(this, [percent])
        },
        skipTo: function (percent) {
            if (percent > this.loadedPercent) {
                return
            }
            this.element.currentTime = this.duration * percent;
            this.updatePlayhead()
        },
        load: function (mp3) {
            this.loadStartedCalled = false;
            this.source.setAttribute("src", mp3);
            this.element.load();
            this.mp3 = mp3;
            container[audiojs].events.trackLoadProgress(this)
        },
        loadError: function () {
            this.settings.loadError.apply(this)
        },
        init: function () {
            this.settings.init.apply(this)
        },
        loadStarted: function () {
            if (!this.element.duration) {
                return false
            }
            this.duration = this.element.duration;
            this.updatePlayhead();
            this.settings.loadStarted.apply(this)
        },
        loadProgress: function () {
            if (this.element.buffered != null && this.element.buffered.length) {
                if (!this.loadStartedCalled) {
                    this.loadStartedCalled = this.loadStarted()
                }
                var durationLoaded = this.element.buffered.end(this.element.buffered.length - 1);
                this.loadedPercent = durationLoaded / this.duration;
                this.settings.loadProgress.apply(this, [this.loadedPercent])
            }
        },
        playPause: function () {
            if (this.playing) {
                this.pause()
            } else {
                this.play()
            }
        },
        play: function () {
            var ios = (/(ipod|iphone|ipad)/i).test(navigator.userAgent);
            if (ios && this.element.readyState == 0) {
                this.init.apply(this)
            }
            if (!this.settings.preload) {
                this.settings.preload = true;
                this.element.setAttribute("preload", "auto");
                container[audiojs].events.trackLoadProgress(this)
            }
            this.playing = true;
            this.element.play();
            this.settings.play.apply(this)
        },
        pause: function () {
            this.playing = false;
            this.element.pause();
            this.settings.pause.apply(this)
        },
        setVolume: function (v) {
            this.element.volume = v
        },
        trackEnded: function (e) {
            this.skipTo.apply(this, [0]);
            if (!this.settings.loop) {
                this.pause.apply(this)
            }
            this.settings.trackEnded.apply(this)
        }
    };
    var getByClass = function (searchClass, node) {
        var matches = [];
        node = node || document;
        if (node.getElementsByClassName) {
            matches = node.getElementsByClassName(searchClass)
        } else {
            var i, l, els = node.getElementsByTagName("*"),
                pattern = new RegExp("(^|\\s)" + searchClass + "(\\s|$)");
            for (i = 0, l = els.length; i < l; i++) {
                    if (pattern.test(els[i].className)) {
                        matches.push(els[i])
                    }
                }
        }
        return matches.length > 1 ? matches : matches[0]
    }
})("audiojs", "audiojsInstance", this);